(()=>{"use strict";const e=async(e,t)=>{const n=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=76d5136cd55d14c88e4d9549d0f550f2`),a=await n.json(),o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${a.coord.lat}&lon=${a.coord.lon}&units=${t}&exclude=minutely,alerts&appid=76d5136cd55d14c88e4d9549d0f550f2`);return[a,await o.json()]};async function t(t,n="metric"){try{const a=await async function(t,n){const a=document.querySelector(".loader");try{return a.textContent="Loading ...",a.classList.toggle("visible"),await Promise.race([e(t,n),(o=5e3,new Promise(((e,t)=>{setTimeout((()=>{t("Timeout")}),o)})))]).then((function(e){return a.classList.toggle("visible"),e}))}catch(e){return a.textContent="City not found!",void setTimeout((()=>{a.classList.toggle("visible"),a.textContent="Loading ..."}),2e3)}var o}(t,n);if(!a)return;const o=a[0].name,r=a[0].sys.country;let c=new Date((new Date).toLocaleString("en-US",{timeZone:a[1].timezone}));const i=Math.floor(a[0].main.temp),d=a[0].weather[0].main,s=a[0].weather[0].icon,u=a[0].weather[0].description,l=Math.floor(a[0].main.feels_like),m=a[0].main.humidity,y=Math.floor(a[0].wind.speed);let p=[];for(let e=1;e<8;e++){const t=a[1].daily[e],n={temperatureMax:t.temp.max,temperatureMin:t.temp.min,weather:t.weather[0].main,icon:t.weather[0].icon};p.push(n)}return{cityName:o,countryName:r,time:c,temperature:i,weather:d,icon:s,weatherDesc:u,feelsLike:l,humidity:m,windSpeed:y,scale:n,dailyForecast:p}}catch(e){return}}function n(e){const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],n=document.querySelector(".weather-info"),o=document.querySelector(".weather-icon"),r=document.querySelector(".city-name"),c=document.querySelector(".date"),i=document.querySelector(".temperature-value"),d=document.querySelector(".temperature-icon"),s=document.querySelector(".feels-like-icon"),u=document.querySelector(".feels-like-value"),l=document.querySelector(".humidity-icon"),m=document.querySelector(".humidity-value"),y=document.querySelector(".wind-speed-icon"),p=document.querySelector(".wind-speed-value"),h=document.querySelector(".change-scale-desc");n.textContent=e.weather,o.innerHTML=`<img src="../icons/${e.icon}.png"></img>`,r.textContent=e.cityName+", "+e.countryName,c.textContent=t[e.time.getDay()]+", "+e.time.getDate()+" - "+e.time.getHours()+":"+e.time.getMinutes(),i.textContent=e.temperature,d.textContent="metric"===e.scale?"ºC":"ºF",s.classList.add("fa-solid"),s.classList.add("fa-temperature-high"),u.textContent=e.feelsLike+" "+d.textContent,l.classList.add("fa-solid"),l.classList.add("fa-droplet"),m.textContent=e.humidity+" %",y.classList.add("fa-solid"),y.classList.add("fa-wind"),p.textContent=e.windSpeed+" "+("metric"===e.scale?"meter/sec":"miles/hour"),h.textContent="Change to "+("metric"===e.scale?"imperial":"metric");for(let n=0;n<e.dailyForecast.length;n++){const o=document.querySelector(`.day${n+1}`),r=document.querySelector(`.day${n+1} > .weekday`),c=document.querySelector(`.day${n+1} > .max-temp`),i=document.querySelector(`.day${n+1} > .min-temp`),s=document.querySelector(`.day${n+1} > .weather-day`),u=document.querySelector(`.day${n+1} > .icon`);r.innerHTML=a(e.time.getDay(),n,t),c.textContent=Math.floor(e.dailyForecast[n].temperatureMax)+" "+d.textContent,i.textContent=Math.floor(e.dailyForecast[n].temperatureMin)+" "+d.textContent,s.textContent=e.dailyForecast[n].weather,u.innerHTML=`<img src="../icons/${e.dailyForecast[n].icon}.png"></img>`,o.appendChild(r),o.appendChild(c),o.appendChild(i),o.appendChild(s),o.appendChild(u)}}const a=(e,t,n)=>{let a=e+t;return a>6&&(a-=7),n[a]},o=document.querySelector(".fa-magnifying-glass"),r=document.querySelector("input#search"),c=document.querySelector(".change-scale"),i=document.querySelector(".temperature-icon"),d=document.querySelector(".city-name");!async function(){o.addEventListener("click",(async()=>{try{n(await t(r.value))}catch(e){}})),c.addEventListener("click",(async()=>{if(i&&d){const e="ºC"===i.textContent?"imperial":"metric";n(await t(d.textContent,e))}}))}(),async function(){n(await t("Barcelona"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUV4RCxNQUFNMUUsUUFJWHVFLEVBQWtCRSxpQkFBaUIsU0FBU2xHLFVBQ3hDLEdBQUdzRSxHQUFjMkIsRUFBVyxDQUN4QixNQUFNL0YsRUFBbUMsT0FBM0JvRSxFQUFXdkQsWUFBdUIsV0FBYSxTQUU3RCtDLFFBRDRCbkQsRUFBWXNGLEVBQVdsRixZQUFhYixRQ25CNUVrRyxHQUVBLGlCQUVJdEMsUUFEZ0JuRCxFQUFZLGNBRGhDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9mZXRjaEFQSS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9wcm9jZXNzRGF0YS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2xvZ2ljL2FkZEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFQSSAoY2l0eSxzY2FsZSl7XHJcbiAgICBjb25zdCBsb2FkZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXInKVxyXG4gICAgdHJ5e1xyXG4gICAgICAgIC8vVE9ETyBSZWZhY3RvciB3aXRoIFByb21pc2UuYWxsXHJcbiAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgbG9hZGVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoV2VhdGhlckFQSShjaXR5LHNjYWxlKSxcclxuICAgICAgICAgICAgdGltZW91dFByb21pc2UoNTAwMClcclxuICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKHJlc29sdmUpe1xyXG4gICAgICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgIGxvYWRlckVsLnRleHRDb250ZW50ID0gJ0NpdHkgbm90IGZvdW5kISdcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuICAgICAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgfVxyXG4gICAgICAgICwyMDAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG59XHJcbiAgICBcclxuY29uc3QgZmV0Y2hXZWF0aGVyQVBJID0gYXN5bmMgKGNpdHksc2NhbGUpID0+e1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9xPSR7Y2l0eX0mdW5pdHM9JHtzY2FsZX0mYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9vbmVjYWxsP2xhdD0ke2RhdGEuY29vcmQubGF0fSZsb249JHtkYXRhLmNvb3JkLmxvbn0mdW5pdHM9JHtzY2FsZX0mZXhjbHVkZT1taW51dGVseSxhbGVydHMmYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YTIgPSBhd2FpdCByZXNwb25zZTIuanNvbigpXHJcbiAgICByZXR1cm4gW2RhdGEsZGF0YTJdICBcclxufVxyXG4gICAgICAgIFxyXG5jb25zdCB0aW1lb3V0UHJvbWlzZSA9IChkZWxheSkgPT57XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PntcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICByZWplY3QoJ1RpbWVvdXQnKVxyXG4gICAgICAgIH0sIGRlbGF5KVxyXG4gICAgfSlcclxufVxyXG4vLyBjb25zdCByZXNwb25zZTMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cy8xdkNXSGFDNWYydVMzeWhwd1diSUE2L2FsYnVtcz9hbGJ1bV90eXBlPVNJTkdMRSZvZmZzZXQ9MjAmbGltaXQ9MTAnKVxyXG4vLyBjb25zdCBkYXRhMyA9IGF3YWl0IHJlc3BvbnNlMy5qc29uKClcclxuLy8gY29uc29sZS5sb2coZGF0YTMpIiwiaW1wb3J0IHsgZmV0Y2hBUEkgfSBmcm9tICcuL2ZldGNoQVBJJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGNpdHksc2NhbGUgPSAnbWV0cmljJyl7XHJcbiAgICB0cnl7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoQVBJKGNpdHksIHNjYWxlKVxyXG4gICAgICAgIGlmKCFkYXRhKSByZXR1cm5cclxuICAgICAgICBjb25zdCBjaXR5TmFtZSA9IGRhdGFbMF0ubmFtZVxyXG4gICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gZGF0YVswXS5zeXMuY291bnRyeVxyXG4gICAgICAgIGxldCB0aW1lID0gbmV3IERhdGUobmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7dGltZVpvbmU6IGRhdGFbMV0udGltZXpvbmV9KSlcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcGVyYXR1cmUgPSBNYXRoLmZsb29yKGRhdGFbMF0ubWFpbi50ZW1wKVxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXIgPSBkYXRhWzBdLndlYXRoZXJbMF0ubWFpblxyXG4gICAgICAgIGNvbnN0IGljb24gPSBkYXRhWzBdLndlYXRoZXJbMF0uaWNvblxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJEZXNjID0gZGF0YVswXS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgY29uc3QgZmVlbHNMaWtlID0gTWF0aC5mbG9vcihkYXRhWzBdLm1haW4uZmVlbHNfbGlrZSlcclxuICAgICAgICBjb25zdCBodW1pZGl0eSA9IGRhdGFbMF0ubWFpbi5odW1pZGl0eVxyXG4gICAgICAgIGNvbnN0IHdpbmRTcGVlZCA9IE1hdGguZmxvb3IoZGF0YVswXS53aW5kLnNwZWVkKVxyXG5cclxuICAgICAgICBsZXQgZGFpbHlGb3JlY2FzdCA9IFtdXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgOCA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBkYXRhWzFdLmRhaWx5W2ldXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHtcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlTWF4IDogZGF5LnRlbXAubWF4LFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmVNaW4gOiBkYXkudGVtcC5taW4sXHJcbiAgICAgICAgICAgICAgICB3ZWF0aGVyIDogZGF5LndlYXRoZXJbMF0ubWFpbixcclxuICAgICAgICAgICAgICAgIGljb24gOiBkYXkud2VhdGhlclswXS5pY29uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGFpbHlGb3JlY2FzdC5wdXNoKHZhbHVlcylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGNpdHlOYW1lLFxyXG4gICAgICAgICAgICBjb3VudHJ5TmFtZSxcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgIHdlYXRoZXIsXHJcbiAgICAgICAgICAgIGljb24sXHJcbiAgICAgICAgICAgIHdlYXRoZXJEZXNjLFxyXG4gICAgICAgICAgICBmZWVsc0xpa2UsXHJcbiAgICAgICAgICAgIGh1bWlkaXR5LFxyXG4gICAgICAgICAgICB3aW5kU3BlZWQsXHJcbiAgICAgICAgICAgIHNjYWxlLFxyXG4gICAgICAgICAgICBkYWlseUZvcmVjYXN0XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsIi8vIFRha2VzIHByb2Nlc3NEYXRhIGFzIGFyZ3VtZW50XHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KXtcclxuICAgIGNvbnN0IHdlZWtEYXlOYW1lcyA9IFsnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScsICdTdW5kYXknXVxyXG4gICAgY29uc3Qgd2VhdGhlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItaW5mbycpXHJcbiAgICBjb25zdCB3ZWF0aGVySWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndlYXRoZXItaWNvbicpXHJcbiAgICBjb25zdCBjaXR5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eS1uYW1lJylcclxuICAgIGNvbnN0IHRpbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kYXRlJylcclxuICAgIGNvbnN0IHRlbXBlcmF0dXJlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtdmFsdWUnKVxyXG4gICAgY29uc3QgdGVtcEljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wZXJhdHVyZS1pY29uJylcclxuICAgIGNvbnN0IGZlZWxzTGlrZUljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVscy1saWtlLWljb24nKVxyXG4gICAgY29uc3QgZmVlbHNMaWtlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlbHMtbGlrZS12YWx1ZScpXHJcbiAgICBjb25zdCBodW1pZGl0eUljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eS1pY29uJylcclxuICAgIGNvbnN0IGh1bWlkaXR5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaHVtaWRpdHktdmFsdWUnKVxyXG4gICAgY29uc3Qgd2luZFNwZWVkSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQtc3BlZWQtaWNvbicpXHJcbiAgICBjb25zdCB3aW5kU3BlZWRFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kLXNwZWVkLXZhbHVlJylcclxuICAgIGNvbnN0IHNjYWxlVG9DaGFuZ2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFuZ2Utc2NhbGUtZGVzYycpXHJcblxyXG4gICAgd2VhdGhlckVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS53ZWF0aGVyXHJcbiAgICB3ZWF0aGVySWNvbkVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIi4uL2ljb25zLyR7ZGF0YVRvRGlzcGxheS5pY29ufS5wbmdcIj48L2ltZz5gXHJcbiAgICBjaXR5RWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LmNpdHlOYW1lICsgJywgJyArIGRhdGFUb0Rpc3BsYXkuY291bnRyeU5hbWVcclxuICAgIHRpbWVFbC50ZXh0Q29udGVudCA9IHdlZWtEYXlOYW1lc1tkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0RGF5KCldICsgJywgJyArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXREYXRlKCkgKyAnIC0gJyArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXRIb3VycygpICsgJzonICsgZGF0YVRvRGlzcGxheS50aW1lLmdldE1pbnV0ZXMoKVxyXG4gICAgdGVtcGVyYXR1cmVFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkudGVtcGVyYXR1cmVcclxuICAgIHRlbXBJY29uRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyA/ICfCukMnIDogJ8K6RidcclxuXHJcbiAgICBmZWVsc0xpa2VJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGZlZWxzTGlrZUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS10ZW1wZXJhdHVyZS1oaWdoJykgXHJcbiAgICBmZWVsc0xpa2VFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuZmVlbHNMaWtlICsgJyAnICsgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgaHVtaWRpdHlJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGh1bWlkaXR5SWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLWRyb3BsZXQnKSBcclxuICAgIGh1bWlkaXR5RWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5Lmh1bWlkaXR5ICsgJyAlJ1xyXG4gICAgd2luZFNwZWVkSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXNvbGlkJykgXHJcbiAgICB3aW5kU3BlZWRJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtd2luZCcpIFxyXG4gICAgd2luZFNwZWVkRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LndpbmRTcGVlZCArICcgJyArIChkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyA/ICdtZXRlci9zZWMnIDogJ21pbGVzL2hvdXInKVxyXG4gICAgc2NhbGVUb0NoYW5nZUVsLnRleHRDb250ZW50ID0gJ0NoYW5nZSB0byAnICsgKGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnID8gJ2ltcGVyaWFsJyA6ICdtZXRyaWMnKVxyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9YClcclxuICAgICAgICAvL1RPRE8gSW1wbGVtZW50IHdlZWtkYXlcclxuICAgICAgICBjb25zdCB3ZWVrRGF5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAud2Vla2RheWApXHJcbiAgICAgICAgY29uc3QgbWF4VGVtcEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLm1heC10ZW1wYClcclxuICAgICAgICBjb25zdCBtaW5UZW1wRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAubWluLXRlbXBgKVxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC53ZWF0aGVyLWRheWApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC5pY29uYClcclxuXHJcbiAgICAgICAgd2Vla0RheUVsLmlubmVySFRNTCA9IGdldFdlZWtkYXlOYW1lKGRhdGFUb0Rpc3BsYXkudGltZS5nZXREYXkoKSwgaSwgd2Vla0RheU5hbWVzKVxyXG4gICAgICAgIG1heFRlbXBFbC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IoZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLnRlbXBlcmF0dXJlTWF4KSArICcgJyArIHRlbXBJY29uRWwudGV4dENvbnRlbnRcclxuICAgICAgICBtaW5UZW1wRWwudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS50ZW1wZXJhdHVyZU1pbikgKyAnICcrIHRlbXBJY29uRWwudGV4dENvbnRlbnRcclxuICAgICAgICB3ZWF0aGVyRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0ud2VhdGhlclxyXG4gICAgICAgIHdlYXRoZXJJY29uRWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiLi4vaWNvbnMvJHtkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0uaWNvbn0ucG5nXCI+PC9pbWc+YFxyXG4gICAgICAgXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlZWtEYXlFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobWF4VGVtcEVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChtaW5UZW1wRWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlYXRoZXJFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQod2VhdGhlckljb25FbCkgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGdldFdlZWtkYXlOYW1lID0gKGN1cnJlbnREYXksZGF5c0Zyb21Ub2RheSwgd2Vla0RheU5hbWVzKSA9PntcclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBkYXksIHRvIGtub3cgd2hlcmUgdG8gc3RhcnRcclxuICAgIGxldCBkYXlUb1NlbGVjdCA9IGN1cnJlbnREYXkgKyBkYXlzRnJvbVRvZGF5XHJcbiAgICBpZihkYXlUb1NlbGVjdCA+IDYpe1xyXG4gICAgICAgIGRheVRvU2VsZWN0IC09IDdcclxuICAgIH1cclxuICAgIHJldHVybiB3ZWVrRGF5TmFtZXNbZGF5VG9TZWxlY3RdXHJcbn0iLCJpbXBvcnQgeyBwcm9jZXNzRGF0YSB9IGZyb20gJy4vcHJvY2Vzc0RhdGEnXHJcbmltcG9ydCB7IHJlbmRlclN0YXRpY0VsZW1lbnRzIH0gZnJvbSAnLi4vdmlldy9yZW5kZXJTdGF0aWNFbGVtZW50cydcclxuXHJcblxyXG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmEtbWFnbmlmeWluZy1nbGFzcycpXHJcbi8vIEZpeGVkIHRvIGEgY2l0eSBmb3IgdGVzdGluZ1xyXG5jb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0I3NlYXJjaCcpXHJcbmNvbnN0IGNoYW5nZVNjYWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1zY2FsZScpXHJcbmNvbnN0IHRlbXBJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtaWNvbicpXHJcbmNvbnN0IGNpdHlOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eS1uYW1lJylcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpe1xyXG4gICAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVG9EaXNwbGF5ID0gIGF3YWl0IHByb2Nlc3NEYXRhKHNlYXJjaElucHV0LnZhbHVlKVxyXG4gICAgICAgICAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KVxyXG4gICAgICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY2hhbmdlU2NhbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PntcclxuICAgICAgICBpZih0ZW1wSWNvbkVsICYmIGNpdHlOYW1lRWwpe1xyXG4gICAgICAgICAgICBjb25zdCBzY2FsZSA9IHRlbXBJY29uRWwudGV4dENvbnRlbnQgPT09ICfCukMnID8gJ2ltcGVyaWFsJyA6ICdtZXRyaWMnXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFUb0Rpc3BsYXkgPSBhd2FpdCBwcm9jZXNzRGF0YShjaXR5TmFtZUVsLnRleHRDb250ZW50LCBzY2FsZSlcclxuICAgICAgICAgICAgcmVuZGVyU3RhdGljRWxlbWVudHMoZGF0YVRvRGlzcGxheSlcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufSIsImltcG9ydCB7cHJvY2Vzc0RhdGF9IGZyb20gJy4vbG9naWMvcHJvY2Vzc0RhdGEnXHJcbmltcG9ydCB7cmVuZGVyU3RhdGljRWxlbWVudHN9IGZyb20gJy4vdmlldy9yZW5kZXJTdGF0aWNFbGVtZW50cydcclxuaW1wb3J0IHsgYWRkRXZlbnRMaXN0ZW5lcnMgfSBmcm9tICcuL2xvZ2ljL2FkZEV2ZW50TGlzdGVuZXJzJ1xyXG5cclxuYWRkRXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbihhc3luYyBmdW5jdGlvbigpe1xyXG4gICAgY29uc3QgYSA9IGF3YWl0IHByb2Nlc3NEYXRhKCdCYXJjZWxvbmEnKVxyXG4gICAgcmVuZGVyU3RhdGljRWxlbWVudHMoYSlcclxufSkoKSJdLCJuYW1lcyI6WyJmZXRjaFdlYXRoZXJBUEkiLCJhc3luYyIsImNpdHkiLCJzY2FsZSIsInJlc3BvbnNlIiwiZmV0Y2giLCJkYXRhIiwianNvbiIsInJlc3BvbnNlMiIsImNvb3JkIiwibGF0IiwibG9uIiwicHJvY2Vzc0RhdGEiLCJsb2FkZXJFbCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiUHJvbWlzZSIsInJhY2UiLCJkZWxheSIsInJlc29sdmUiLCJyZWplY3QiLCJzZXRUaW1lb3V0IiwidGhlbiIsImVyciIsImZldGNoQVBJIiwiY2l0eU5hbWUiLCJuYW1lIiwiY291bnRyeU5hbWUiLCJzeXMiLCJjb3VudHJ5IiwidGltZSIsIkRhdGUiLCJ0b0xvY2FsZVN0cmluZyIsInRpbWVab25lIiwidGltZXpvbmUiLCJ0ZW1wZXJhdHVyZSIsIk1hdGgiLCJmbG9vciIsIm1haW4iLCJ0ZW1wIiwid2VhdGhlciIsImljb24iLCJ3ZWF0aGVyRGVzYyIsImRlc2NyaXB0aW9uIiwiZmVlbHNMaWtlIiwiZmVlbHNfbGlrZSIsImh1bWlkaXR5Iiwid2luZFNwZWVkIiwid2luZCIsInNwZWVkIiwiZGFpbHlGb3JlY2FzdCIsImkiLCJkYXkiLCJkYWlseSIsInZhbHVlcyIsInRlbXBlcmF0dXJlTWF4IiwibWF4IiwidGVtcGVyYXR1cmVNaW4iLCJtaW4iLCJwdXNoIiwicmVuZGVyU3RhdGljRWxlbWVudHMiLCJkYXRhVG9EaXNwbGF5Iiwid2Vla0RheU5hbWVzIiwid2VhdGhlckVsIiwid2VhdGhlckljb25FbCIsImNpdHlFbCIsInRpbWVFbCIsInRlbXBlcmF0dXJlRWwiLCJ0ZW1wSWNvbkVsIiwiZmVlbHNMaWtlSWNvbkVsIiwiZmVlbHNMaWtlRWwiLCJodW1pZGl0eUljb25FbCIsImh1bWlkaXR5RWwiLCJ3aW5kU3BlZWRJY29uRWwiLCJ3aW5kU3BlZWRFbCIsInNjYWxlVG9DaGFuZ2VFbCIsImlubmVySFRNTCIsImdldERheSIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJhZGQiLCJsZW5ndGgiLCJkaXYiLCJ3ZWVrRGF5RWwiLCJtYXhUZW1wRWwiLCJtaW5UZW1wRWwiLCJnZXRXZWVrZGF5TmFtZSIsImFwcGVuZENoaWxkIiwiY3VycmVudERheSIsImRheXNGcm9tVG9kYXkiLCJkYXlUb1NlbGVjdCIsInNlYXJjaEJ1dHRvbiIsInNlYXJjaElucHV0IiwiY2hhbmdlU2NhbGVCdXR0b24iLCJjaXR5TmFtZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9