(()=>{"use strict";const e=async(e,t)=>{const a=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=76d5136cd55d14c88e4d9549d0f550f2`),n=await a.json(),o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${n.coord.lat}&lon=${n.coord.lon}&units=${t}&exclude=minutely,alerts&appid=76d5136cd55d14c88e4d9549d0f550f2`);return{dataSet1:n,dataSet2:await o.json()}};async function t(t,a="metric"){try{const n=await async function(t,a){const n=document.querySelector(".loader");try{return n.textContent="Loading ...",n.classList.toggle("visible"),await Promise.race([e(t,a),(o=5e3,new Promise((e=>{setTimeout((()=>{e("Timeout")}),o)})))]).then((e=>(n.classList.toggle("visible"),e)))}catch(e){return n.textContent="City not found!",void setTimeout((()=>{n.classList.toggle("visible"),n.textContent="Loading ..."}),2e3)}var o}(t,a);if(!n)return;const o=n.dataSet1.name,c=n.dataSet1.sys.country;let r=new Date((new Date).toLocaleString("en-US",{timeZone:n.timezone}));const i=Math.floor(n.dataSet1.main.temp),d=n.dataSet1.weather[0].main,l=n.dataSet1.weather[0].icon,s=n.dataSet1.weather[0].description,u=Math.floor(n.dataSet1.main.feels_like),m=n.dataSet1.main.humidity,y=Math.floor(n.dataSet1.wind.speed);let p=[];for(let e=1;e<8;e++){const t=n.dataSet2.daily[e],a={temperatureMax:t.temp.max,temperatureMin:t.temp.min,weather:t.weather[0].main,icon:t.weather[0].icon};p.push(a)}return{cityName:o,countryName:c,time:r,temperature:i,weather:d,weatherDesc:s,icon:l,feelsLike:u,humidity:m,windSpeed:y,scale:a,dailyForecast:p}}catch(e){return}}function a(e){const t=document.querySelector("body"),a=document.querySelector(".weather-info"),o=document.querySelector(".weather-icon"),c=document.querySelector(".city-name"),r=document.querySelector(".date"),i=document.querySelector(".temperature-value"),d=document.querySelector(".temperature-icon"),l=document.querySelector(".feels-like-icon"),s=document.querySelector(".feels-like-value"),u=document.querySelector(".humidity-icon"),m=document.querySelector(".humidity-value"),y=document.querySelector(".wind-speed-icon"),p=document.querySelector(".wind-speed-value"),h=document.querySelector(".change-scale-desc"),S=document.querySelector("input#search");console.log(e),a.textContent=e.weather,o.innerHTML=`<img src="../icons/${e.icon}.png"></img>`,c.textContent=e.cityName+", "+e.countryName,i.textContent=e.temperature,d.textContent="metric"===e.scale?"ºC":"ºF";const f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];r.textContent=f[e.time.getDay()]+", "+e.time.getDate()+" - "+("0"+e.time.getHours()).slice(-2)+":"+("0"+e.time.getMinutes()).slice(-2),l.classList.add("fa-solid"),l.classList.add("fa-temperature-high"),s.textContent=e.feelsLike+" "+d.textContent,u.classList.add("fa-solid"),u.classList.add("fa-droplet"),m.textContent=e.humidity+" %",y.classList.add("fa-solid"),y.classList.add("fa-wind"),p.textContent=e.windSpeed+" "+("metric"===e.scale?"meter/sec":"miles/hour"),h.textContent="Change to "+("metric"===e.scale?"imperial":"metric"),S.value="",t.style.backgroundColor="blue";for(let t=0;t<e.dailyForecast.length;t++){const a=document.querySelector(`.day${t+1}`),o=document.querySelector(`.day${t+1} > .weekday`),c=document.querySelector(`.day${t+1} > .max-temp`),r=document.querySelector(`.day${t+1} > .min-temp`),i=document.querySelector(`.day${t+1} > .weather-day`),l=document.querySelector(`.day${t+1} > .icon`);o.innerHTML=n(e.time.getDay(),t,f),c.textContent=Math.floor(e.dailyForecast[t].temperatureMax)+" "+d.textContent,r.textContent=Math.floor(e.dailyForecast[t].temperatureMin)+" "+d.textContent,i.textContent=e.dailyForecast[t].weather,l.innerHTML=`<img src="../icons/${e.dailyForecast[t].icon}.png"></img>`,a.appendChild(o),a.appendChild(c),a.appendChild(r),a.appendChild(i),a.appendChild(l)}}const n=(e,t,a)=>{let n=e+t;return n>6&&(n-=7),a[n]},o=document.querySelector(".fa-magnifying-glass"),c=document.querySelector("input#search"),r=document.querySelector(".change-scale"),i=document.querySelector(".temperature-icon"),d=document.querySelector(".city-name");!async function(){o.addEventListener("click",(async()=>{try{a(await t(c.value))}catch(e){}})),r.addEventListener("click",(async()=>{if(i&&d){const e="ºC"===i.textContent?"imperial":"metric";a(await t(d.textContent,e))}}))}(),async function(){a(await t("Barcelona"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxjQUFjLGdCQUNyQ3dGLEVBQW9CekYsU0FBU0MsY0FBYyxpQkFDM0N1RCxFQUFheEQsU0FBU0MsY0FBYyxxQkFDcEN5RixFQUFhMUYsU0FBU0MsY0FBYyxlQUVuQ2hCLGlCQUNIdUcsRUFBYUcsaUJBQWlCLFNBQVMxRyxVQUNuQyxJQUVJK0QsUUFENkJuRCxFQUFZbUUsRUFBWVcsUUFFeEQsTUFBTWhFLFFBSVg4RSxFQUFrQkUsaUJBQWlCLFNBQVMxRyxVQUN4QyxHQUFHdUUsR0FBY2tDLEVBQVcsQ0FDeEIsTUFBTXZHLEVBQW1DLE9BQTNCcUUsRUFBV3RELFlBQXVCLFdBQWEsU0FFN0Q4QyxRQUQ0Qm5ELEVBQVk2RixFQUFXeEYsWUFBYWYsUUNsQjVFeUcsR0FFQSxpQkFFSTVDLFFBRGdCbkQsRUFBWSxjQURoQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvbG9naWMvZmV0Y2hBUEkuanMiLCJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvbG9naWMvcHJvY2Vzc0RhdGEuanMiLCJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvdmlldy9yZW5kZXJTdGF0aWNFbGVtZW50cy5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9hZGRFdmVudExpc3RlbmVycy5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZmV0Y2hBUEkgKGNpdHksc2NhbGUpe1xyXG4gICAgLy8gR2V0IGxvYWRlciBlbGVtZW50IHRvIHRvb2dsZSBpdCdzIGRpc3BsYXkgcHJvcGVydHkgd2hpbGUgYXdhaXRpbmcgZmV0Y2hcclxuICAgIGNvbnN0IGxvYWRlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmxvYWRlcicpXHJcbiAgICB0cnl7XHJcbiAgICAgICAgLy8gRGlzcGxheSB0aGUgbG9hZGVyIGRpdiB3aGlsZSB0aGUgZGF0YSBpcyBmZXRjaGluZ1xyXG4gICAgICAgIGxvYWRlckVsLnRleHRDb250ZW50ID0gJ0xvYWRpbmcgLi4uJ1xyXG4gICAgICAgIGxvYWRlckVsLmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2libGUnKVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRyeSB0byBmZXRjaCBkYXRhIGluIGxlc3MgdGhhbiA1IHNlY29uZHNcclxuICAgICAgICBjb25zdCB3ZWF0aGVyRGF0YSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoV2VhdGhlckFQSShjaXR5LHNjYWxlKSxcclxuICAgICAgICAgICAgdGltZW91dFByb21pc2UoNTAwMClcclxuICAgICAgICBdKS50aGVuKCh3ZWF0aGVyRGF0YSk9PntcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIElmIHJlc29sdmUsIHRvb2dsZSBkaXNwbGF5IHRvIG5vdCBzaG93XHJcbiAgICAgICAgICAgIGxvYWRlckVsLmNsYXNzTGlzdC50b2dnbGUoJ3Zpc2libGUnKVxyXG4gICAgICAgICAgICByZXR1cm4gd2VhdGhlckRhdGFcclxuICAgICAgICB9KVxyXG4gICAgICAgIHJldHVybiB3ZWF0aGVyRGF0YVxyXG5cclxuICAgIH1jYXRjaChlcnIpe1xyXG5cclxuICAgICAgICAvLyBJZiByZWplY3RlZCwgc2hvdyBlcnJvciBtZXNzYWdlIGZvciAyXHJcbiAgICAgICAgLy8gc2Vjb25kcyBhbmQgdG9vZ2xlIGRpc3BsYXkgdG8gbm93IHNob3dcclxuICAgICAgICBsb2FkZXJFbC50ZXh0Q29udGVudCA9ICdDaXR5IG5vdCBmb3VuZCEnXHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PntcclxuICAgICAgICAgICAgbG9hZGVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpXHJcbiAgICAgICAgICAgIGxvYWRlckVsLnRleHRDb250ZW50ID0gJ0xvYWRpbmcgLi4uJ1xyXG4gICAgICAgIH0sMjAwMClcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxufVxyXG5jb25zdCB0aW1lb3V0UHJvbWlzZSA9IChkZWxheSkgPT57XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlamVjdCkgPT57XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PntcclxuICAgICAgICAgICAgcmVqZWN0KCdUaW1lb3V0JylcclxuICAgICAgICB9LCBkZWxheSlcclxuICAgIH0pXHJcbn1cclxuICAgIFxyXG5jb25zdCBmZXRjaFdlYXRoZXJBUEkgPSBhc3luYyAoY2l0eSxzY2FsZSkgPT57XHJcbiAgICBjb25zdCByZXNwb25zZTEgPSBcclxuICAgICAgYXdhaXQgZmV0Y2goYGh0dHA6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L3dlYXRoZXI/cT0ke2NpdHl9JnVuaXRzPSR7c2NhbGV9JmFwcGlkPTc2ZDUxMzZjZDU1ZDE0Yzg4ZTRkOTU0OWQwZjU1MGYyYClcclxuICAgIGNvbnN0IGRhdGFTZXQxID0gYXdhaXQgcmVzcG9uc2UxLmpzb24oKVxyXG4gICAgXHJcbiAgICBjb25zdCByZXNwb25zZTIgPSAgXHJcbiAgICAgIGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtkYXRhU2V0MS5jb29yZC5sYXR9Jmxvbj0ke2RhdGFTZXQxLmNvb3JkLmxvbn0mdW5pdHM9JHtzY2FsZX0mZXhjbHVkZT1taW51dGVseSxhbGVydHMmYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YVNldDIgPSBhd2FpdCByZXNwb25zZTIuanNvbigpXHJcblxyXG4gICAgcmV0dXJuIHtkYXRhU2V0MSxkYXRhU2V0Mn0gXHJcbn1cclxuICAgICIsImltcG9ydCB7IGZldGNoQVBJIH0gZnJvbSAnLi9mZXRjaEFQSSdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRGF0YShjaXR5LHNjYWxlID0gJ21ldHJpYycpe1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgZmV0Y2hBUEkoY2l0eSwgc2NhbGUpXHJcbiAgICAgICAgaWYoIXdlYXRoZXJEYXRhKSByZXR1cm5cclxuICAgICAgICBjb25zdCBjaXR5TmFtZSA9IHdlYXRoZXJEYXRhLmRhdGFTZXQxLm5hbWVcclxuICAgICAgICBjb25zdCBjb3VudHJ5TmFtZSA9IHdlYXRoZXJEYXRhLmRhdGFTZXQxLnN5cy5jb3VudHJ5XHJcbiAgICAgICAgbGV0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHt0aW1lWm9uZTogd2VhdGhlckRhdGEudGltZXpvbmV9KSlcclxuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IE1hdGguZmxvb3Iod2VhdGhlckRhdGEuZGF0YVNldDEubWFpbi50ZW1wKVxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXIgPSB3ZWF0aGVyRGF0YS5kYXRhU2V0MS53ZWF0aGVyWzBdLm1haW5cclxuICAgICAgICBjb25zdCBpY29uID0gd2VhdGhlckRhdGEuZGF0YVNldDEud2VhdGhlclswXS5pY29uXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckRlc2MgPSB3ZWF0aGVyRGF0YS5kYXRhU2V0MS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgY29uc3QgZmVlbHNMaWtlID0gTWF0aC5mbG9vcih3ZWF0aGVyRGF0YS5kYXRhU2V0MS5tYWluLmZlZWxzX2xpa2UpXHJcbiAgICAgICAgY29uc3QgaHVtaWRpdHkgPSB3ZWF0aGVyRGF0YS5kYXRhU2V0MS5tYWluLmh1bWlkaXR5XHJcbiAgICAgICAgY29uc3Qgd2luZFNwZWVkID0gTWF0aC5mbG9vcih3ZWF0aGVyRGF0YS5kYXRhU2V0MS53aW5kLnNwZWVkKVxyXG5cclxuICAgICAgICBsZXQgZGFpbHlGb3JlY2FzdCA9IFtdXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgOCA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSB3ZWF0aGVyRGF0YS5kYXRhU2V0Mi5kYWlseVtpXVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZU1heCA6IGRheS50ZW1wLm1heCxcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlTWluIDogZGF5LnRlbXAubWluLFxyXG4gICAgICAgICAgICAgICAgd2VhdGhlciA6IGRheS53ZWF0aGVyWzBdLm1haW4sXHJcbiAgICAgICAgICAgICAgICBpY29uIDogZGF5LndlYXRoZXJbMF0uaWNvblxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGRhaWx5Rm9yZWNhc3QucHVzaCh2YWx1ZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IFxyXG4gICAgICAgICAgICBjaXR5TmFtZSxcclxuICAgICAgICAgICAgY291bnRyeU5hbWUsXHJcbiAgICAgICAgICAgIHRpbWUsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICB3ZWF0aGVyLFxyXG4gICAgICAgICAgICB3ZWF0aGVyRGVzYyxcclxuICAgICAgICAgICAgaWNvbixcclxuICAgICAgICAgICAgZmVlbHNMaWtlLFxyXG4gICAgICAgICAgICBodW1pZGl0eSxcclxuICAgICAgICAgICAgd2luZFNwZWVkLFxyXG4gICAgICAgICAgICBzY2FsZSxcclxuICAgICAgICAgICAgZGFpbHlGb3JlY2FzdFxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9IGNhdGNoKGVycil7XHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4iLCJleHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RhdGljRWxlbWVudHMoZGF0YVRvRGlzcGxheSl7XHJcbiAgICBjb25zdCBib2R5RWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5JylcclxuICAgIGNvbnN0IHdlYXRoZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWluZm8nKVxyXG4gICAgY29uc3Qgd2VhdGhlckljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWljb24nKVxyXG4gICAgY29uc3QgY2l0eUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktbmFtZScpXHJcbiAgICBjb25zdCB0aW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZScpXHJcbiAgICBjb25zdCB0ZW1wZXJhdHVyZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBlcmF0dXJlLXZhbHVlJylcclxuICAgIGNvbnN0IHRlbXBJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtaWNvbicpXHJcbiAgICBjb25zdCBmZWVsc0xpa2VJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlbHMtbGlrZS1pY29uJylcclxuICAgIGNvbnN0IGZlZWxzTGlrZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWxzLWxpa2UtdmFsdWUnKVxyXG4gICAgY29uc3QgaHVtaWRpdHlJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaHVtaWRpdHktaWNvbicpXHJcbiAgICBjb25zdCBodW1pZGl0eUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5LXZhbHVlJylcclxuICAgIGNvbnN0IHdpbmRTcGVlZEljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kLXNwZWVkLWljb24nKVxyXG4gICAgY29uc3Qgd2luZFNwZWVkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZC1zcGVlZC12YWx1ZScpXHJcbiAgICBjb25zdCBzY2FsZVRvQ2hhbmdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlLXNjYWxlLWRlc2MnKVxyXG4gICAgY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCNzZWFyY2gnKVxyXG4gICAgY29uc29sZS5sb2coZGF0YVRvRGlzcGxheSlcclxuXHJcbiAgICB3ZWF0aGVyRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LndlYXRoZXJcclxuICAgIHdlYXRoZXJJY29uRWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiLi4vaWNvbnMvJHtkYXRhVG9EaXNwbGF5Lmljb259LnBuZ1wiPjwvaW1nPmBcclxuICAgIGNpdHlFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuY2l0eU5hbWUgKyAnLCAnICsgZGF0YVRvRGlzcGxheS5jb3VudHJ5TmFtZVxyXG4gICAgdGVtcGVyYXR1cmVFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkudGVtcGVyYXR1cmVcclxuICAgIHRlbXBJY29uRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyA/ICfCukMnIDogJ8K6RidcclxuICAgIFxyXG4gICAgY29uc3Qgd2Vla0RheU5hbWVzID0gWydNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5JywgJ1N1bmRheSddXHJcbiAgICB0aW1lRWwudGV4dENvbnRlbnQgPSB3ZWVrRGF5TmFtZXNbZGF0YVRvRGlzcGxheS50aW1lLmdldERheSgpXSArICcsICcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXREYXRlKCkgKyAnIC0gJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICsgKCcwJyArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXRIb3VycygpKS5zbGljZSgtMikgKyAnOicgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICArICgnMCcrIGRhdGFUb0Rpc3BsYXkudGltZS5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKVxyXG4gICAgXHJcbiAgICBmZWVsc0xpa2VJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGZlZWxzTGlrZUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS10ZW1wZXJhdHVyZS1oaWdoJykgXHJcbiAgICBmZWVsc0xpa2VFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuZmVlbHNMaWtlICsgJyAnICsgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgaHVtaWRpdHlJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGh1bWlkaXR5SWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLWRyb3BsZXQnKSBcclxuICAgIGh1bWlkaXR5RWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5Lmh1bWlkaXR5ICsgJyAlJ1xyXG4gICAgd2luZFNwZWVkSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXNvbGlkJykgXHJcbiAgICB3aW5kU3BlZWRJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtd2luZCcpIFxyXG4gICAgd2luZFNwZWVkRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LndpbmRTcGVlZCArICcgJyArIChkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyA/ICdtZXRlci9zZWMnIDogJ21pbGVzL2hvdXInKVxyXG4gICAgc2NhbGVUb0NoYW5nZUVsLnRleHRDb250ZW50ID0gJ0NoYW5nZSB0byAnICsgKGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnID8gJ2ltcGVyaWFsJyA6ICdtZXRyaWMnKVxyXG4gICAgc2VhcmNoSW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgYm9keUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibHVlJ1xyXG4gIFxyXG4gICAgXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGRpdiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfWApXHJcbiAgICAgICAgY29uc3Qgd2Vla0RheUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLndlZWtkYXlgKVxyXG4gICAgICAgIGNvbnN0IG1heFRlbXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC5tYXgtdGVtcGApXHJcbiAgICAgICAgY29uc3QgbWluVGVtcEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLm1pbi10ZW1wYClcclxuICAgICAgICBjb25zdCB3ZWF0aGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAud2VhdGhlci1kYXlgKVxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAuaWNvbmApXHJcbiAgICAgIFxyXG4gICAgICAgIHdlZWtEYXlFbC5pbm5lckhUTUwgPSBnZXRXZWVrZGF5TmFtZShkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0RGF5KCksIGksIHdlZWtEYXlOYW1lcylcclxuICAgICAgICBtYXhUZW1wRWwudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS50ZW1wZXJhdHVyZU1heCkgKyAnICcgKyB0ZW1wSWNvbkVsLnRleHRDb250ZW50XHJcbiAgICAgICAgbWluVGVtcEVsLnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0udGVtcGVyYXR1cmVNaW4pICsgJyAnKyB0ZW1wSWNvbkVsLnRleHRDb250ZW50XHJcbiAgICAgICAgd2VhdGhlckVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLndlYXRoZXJcclxuICAgICAgICB3ZWF0aGVySWNvbkVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIi4uL2ljb25zLyR7ZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLmljb259LnBuZ1wiPjwvaW1nPmBcclxuICAgICAgICBcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQod2Vla0RheUVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChtYXhUZW1wRWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG1pblRlbXBFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQod2VhdGhlckVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh3ZWF0aGVySWNvbkVsKSBcclxuICAgIH1cclxufVxyXG5cclxuY29uc3QgZ2V0V2Vla2RheU5hbWUgPSAoY3VycmVudERheSxkYXlzRnJvbVRvZGF5LCB3ZWVrRGF5TmFtZXMpID0+e1xyXG4gICAgLy8gR2V0IHRoZSBjdXJyZW50IGRheSwgdG8ga25vdyB3aGVyZSB0byBzdGFydCBjb3VudGluZyBmcm9tXHJcbiAgICBsZXQgZGF5VG9TZWxlY3QgPSBjdXJyZW50RGF5ICsgZGF5c0Zyb21Ub2RheVxyXG4gICAgaWYoZGF5VG9TZWxlY3QgPiA2KXtcclxuICAgICAgICBkYXlUb1NlbGVjdCAtPSA3XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd2Vla0RheU5hbWVzW2RheVRvU2VsZWN0XVxyXG59XHJcblxyXG4vLyBjb25zdCBjaGFuZ2VCYWNrZ3JvdW5kID0gKHdlYXRoZXIsaG91cikgPT57XHJcbi8vIC8vIENoYW5nZSBiYWNrZ3JvdW5kIGJhc2VkIG9uIHdlYXRoZXIgYW5kIGhvdXIgdmFsdWVzXHJcbi8vIC8vIGFuZCBjaGFuZ2UgZm9udCBjb2xvciBpZiBuZWVkZWRcclxuLy8gICAgIGlmKGhvdXIgPj0gNiAmJiBob3VyIDw9IDIwKXtcclxuLy8gICAgICAgICBjb25zdCBiYWNrZ3JvdW5kc0RheSA9IHtcclxuLy8gICAgICAgICAgICAgJ1RodW5kZXJzdG9ybSc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnRHJpenpsZSc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnUmFpbic6ICcnLFxyXG4vLyAgICAgICAgICAgICAnU25vdycgOiAnJywgXHJcbi8vICAgICAgICAgICAgICdDbGVhcic6ICcvaW1hZ2VzL2RheS1jbGVhci5qcGcnLFxyXG4vLyAgICAgICAgICAgICAnQ2xvdWRzJzonJyxcclxuLy8gICAgICAgICAgICAgLy8gXHJcbi8vICAgICAgICAgICAgICdNaXN0JzogJycsXHJcbi8vICAgICAgICAgICAgICdTbW9rZSc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnSGF6ZSc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnRHVzdCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnRm9nJzogJycsXHJcbi8vICAgICAgICAgICAgICdTYW5kJzogJycsXHJcbi8vICAgICAgICAgICAgICdEdXN0JzogJycsXHJcbi8vICAgICAgICAgICAgICdBc2gnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1NxdWFsbCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnVG9ybmFkbyc6ICcnLFxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICByZXR1cm4gYmFja2dyb3VuZHNEYXkud2VhdGhlclxyXG4vLyAgICAgfVxyXG4vLyAgICAgZWxzZXtcclxuLy8gICAgICAgICBjb25zdCBiYWNrZ3JvdW5kc05pZ2h0ID0ge1xyXG4vLyAgICAgICAgICAgICAnVGh1bmRlcnN0b3JtJzogJycsXHJcbi8vICAgICAgICAgICAgICdEcml6emxlJzogJycsXHJcbi8vICAgICAgICAgICAgICdSYWluJzogJycsXHJcbi8vICAgICAgICAgICAgICdTbm93JyA6ICcnLCBcclxuLy8gICAgICAgICAgICAgJ0NsZWFyJzogJycsXHJcbi8vICAgICAgICAgICAgICdDbG91ZHMnOicnLFxyXG4vLyAgICAgICAgICAgICAvLyBcclxuLy8gICAgICAgICAgICAgJ01pc3QnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1Ntb2tlJzogJycsXHJcbi8vICAgICAgICAgICAgICdIYXplJzogJycsXHJcbi8vICAgICAgICAgICAgICdEdXN0JzogJycsXHJcbi8vICAgICAgICAgICAgICdGb2cnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1NhbmQnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0R1c3QnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0FzaCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnU3F1YWxsJzogJycsXHJcbi8vICAgICAgICAgICAgICdUb3JuYWRvJzogJycsXHJcblxyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICByZXR1cm4gYmFja2dyb3VuZHNOaWdodC53ZWF0aGVyXHJcbi8vICAgICB9XHJcbi8vIH0iLCJpbXBvcnQgeyBwcm9jZXNzRGF0YSB9IGZyb20gJy4vcHJvY2Vzc0RhdGEnXHJcbmltcG9ydCB7IHJlbmRlclN0YXRpY0VsZW1lbnRzIH0gZnJvbSAnLi4vdmlldy9yZW5kZXJTdGF0aWNFbGVtZW50cydcclxuXHJcblxyXG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmEtbWFnbmlmeWluZy1nbGFzcycpXHJcbmNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjc2VhcmNoJylcclxuY29uc3QgY2hhbmdlU2NhbGVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlLXNjYWxlJylcclxuY29uc3QgdGVtcEljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wZXJhdHVyZS1pY29uJylcclxuY29uc3QgY2l0eU5hbWVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5LW5hbWUnKVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZEV2ZW50TGlzdGVuZXJzKCl7XHJcbiAgICBzZWFyY2hCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PntcclxuICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFUb0Rpc3BsYXkgPSAgYXdhaXQgcHJvY2Vzc0RhdGEoc2VhcmNoSW5wdXQudmFsdWUpXHJcbiAgICAgICAgICAgIHJlbmRlclN0YXRpY0VsZW1lbnRzKGRhdGFUb0Rpc3BsYXkpXHJcbiAgICAgICAgfWNhdGNoKGVycil7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICBjaGFuZ2VTY2FsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+e1xyXG4gICAgICAgIGlmKHRlbXBJY29uRWwgJiYgY2l0eU5hbWVFbCl7XHJcbiAgICAgICAgICAgIGNvbnN0IHNjYWxlID0gdGVtcEljb25FbC50ZXh0Q29udGVudCA9PT0gJ8K6QycgPyAnaW1wZXJpYWwnIDogJ21ldHJpYydcclxuICAgICAgICAgICAgY29uc3QgZGF0YVRvRGlzcGxheSA9IGF3YWl0IHByb2Nlc3NEYXRhKGNpdHlOYW1lRWwudGV4dENvbnRlbnQsIHNjYWxlKVxyXG4gICAgICAgICAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59IiwiaW1wb3J0IHtwcm9jZXNzRGF0YX0gZnJvbSAnLi9sb2dpYy9wcm9jZXNzRGF0YSdcclxuaW1wb3J0IHtyZW5kZXJTdGF0aWNFbGVtZW50c30gZnJvbSAnLi92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzJ1xyXG5pbXBvcnQgeyBhZGRFdmVudExpc3RlbmVycyB9IGZyb20gJy4vbG9naWMvYWRkRXZlbnRMaXN0ZW5lcnMnXHJcblxyXG5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuKGFzeW5jIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBhID0gYXdhaXQgcHJvY2Vzc0RhdGEoJ0JhcmNlbG9uYScpXHJcbiAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhhKVxyXG59KSgpIl0sIm5hbWVzIjpbImZldGNoV2VhdGhlckFQSSIsImFzeW5jIiwiY2l0eSIsInNjYWxlIiwicmVzcG9uc2UxIiwiZmV0Y2giLCJkYXRhU2V0MSIsImpzb24iLCJyZXNwb25zZTIiLCJjb29yZCIsImxhdCIsImxvbiIsImRhdGFTZXQyIiwicHJvY2Vzc0RhdGEiLCJ3ZWF0aGVyRGF0YSIsImxvYWRlckVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJQcm9taXNlIiwicmFjZSIsImRlbGF5IiwicmVqZWN0Iiwic2V0VGltZW91dCIsInRoZW4iLCJlcnIiLCJmZXRjaEFQSSIsImNpdHlOYW1lIiwibmFtZSIsImNvdW50cnlOYW1lIiwic3lzIiwiY291bnRyeSIsInRpbWUiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ0aW1lWm9uZSIsInRpbWV6b25lIiwidGVtcGVyYXR1cmUiLCJNYXRoIiwiZmxvb3IiLCJtYWluIiwidGVtcCIsIndlYXRoZXIiLCJpY29uIiwid2VhdGhlckRlc2MiLCJkZXNjcmlwdGlvbiIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmQiLCJzcGVlZCIsImRhaWx5Rm9yZWNhc3QiLCJpIiwiZGF5IiwiZGFpbHkiLCJ2YWx1ZXMiLCJ0ZW1wZXJhdHVyZU1heCIsIm1heCIsInRlbXBlcmF0dXJlTWluIiwibWluIiwicHVzaCIsInJlbmRlclN0YXRpY0VsZW1lbnRzIiwiZGF0YVRvRGlzcGxheSIsImJvZHlFbCIsIndlYXRoZXJFbCIsIndlYXRoZXJJY29uRWwiLCJjaXR5RWwiLCJ0aW1lRWwiLCJ0ZW1wZXJhdHVyZUVsIiwidGVtcEljb25FbCIsImZlZWxzTGlrZUljb25FbCIsImZlZWxzTGlrZUVsIiwiaHVtaWRpdHlJY29uRWwiLCJodW1pZGl0eUVsIiwid2luZFNwZWVkSWNvbkVsIiwid2luZFNwZWVkRWwiLCJzY2FsZVRvQ2hhbmdlRWwiLCJzZWFyY2hJbnB1dCIsImNvbnNvbGUiLCJsb2ciLCJpbm5lckhUTUwiLCJ3ZWVrRGF5TmFtZXMiLCJnZXREYXkiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJzbGljZSIsImdldE1pbnV0ZXMiLCJhZGQiLCJ2YWx1ZSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwibGVuZ3RoIiwiZGl2Iiwid2Vla0RheUVsIiwibWF4VGVtcEVsIiwibWluVGVtcEVsIiwiZ2V0V2Vla2RheU5hbWUiLCJhcHBlbmRDaGlsZCIsImN1cnJlbnREYXkiLCJkYXlzRnJvbVRvZGF5IiwiZGF5VG9TZWxlY3QiLCJzZWFyY2hCdXR0b24iLCJjaGFuZ2VTY2FsZUJ1dHRvbiIsImNpdHlOYW1lRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9