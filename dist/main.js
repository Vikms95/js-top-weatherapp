(()=>{"use strict";const e=async(e,t)=>{const n=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=76d5136cd55d14c88e4d9549d0f550f2`),a=await n.json(),o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${a.coord.lat}&lon=${a.coord.lon}&units=${t}&exclude=minutely,alerts&appid=76d5136cd55d14c88e4d9549d0f550f2`);return[a,await o.json()]};async function t(t,n="metric"){try{const a=await async function(t,n){const a=document.querySelector(".loader");try{return a.textContent="Loading ...",a.classList.toggle("visible"),await Promise.race([e(t,n),(o=5e3,new Promise(((e,t)=>{setTimeout((()=>{t("Timeout")}),o)})))]).then((function(e){return a.classList.toggle("visible"),e}))}catch(e){return a.textContent="City not found!",void setTimeout((()=>{a.classList.toggle("visible"),a.textContent="Loading ..."}),2e3)}var o}(t,n);if(!a)return;const o=a[0].name,c=a[0].sys.country;let r=new Date((new Date).toLocaleString("en-US",{timeZone:a[1].timezone}));const i=Math.floor(a[0].main.temp),d=a[0].weather[0].main,s=a[0].weather[0].icon,l=a[0].weather[0].description,u=Math.floor(a[0].main.feels_like),m=a[0].main.humidity,y=Math.floor(a[0].wind.speed);let p=[];for(let e=1;e<8;e++){const t=a[1].daily[e],n={temperatureMax:t.temp.max,temperatureMin:t.temp.min,weather:t.weather[0].main,icon:t.weather[0].icon};p.push(n)}return{cityName:o,countryName:c,time:r,temperature:i,weather:d,icon:s,weatherDesc:l,feelsLike:u,humidity:m,windSpeed:y,scale:n,dailyForecast:p}}catch(e){return}}function n(e){const t=document.querySelector(".weather-info"),n=document.querySelector(".weather-icon"),o=document.querySelector(".city-name"),c=document.querySelector(".date"),r=document.querySelector(".temperature-value"),i=document.querySelector(".temperature-icon"),d=document.querySelector(".feels-like-icon"),s=document.querySelector(".feels-like-value"),l=document.querySelector(".humidity-icon"),u=document.querySelector(".humidity-value"),m=document.querySelector(".wind-speed-icon"),y=document.querySelector(".wind-speed-value"),p=document.querySelector(".change-scale-desc");t.textContent=e.weather,n.innerHTML=`<img src="../icons/${e.icon}.png"></img>`,o.textContent=e.cityName+", "+e.countryName,r.textContent=e.temperature,i.textContent="metric"===e.scale?"ºC":"ºF";const h=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];c.textContent=h[e.time.getDay()]+", "+e.time.getDate()+" - "+("0"+e.time.getHours()).slice(-2)+":"+("0"+e.time.getMinutes()).slice(-2),d.classList.add("fa-solid"),d.classList.add("fa-temperature-high"),s.textContent=e.feelsLike+" "+i.textContent,l.classList.add("fa-solid"),l.classList.add("fa-droplet"),u.textContent=e.humidity+" %",m.classList.add("fa-solid"),m.classList.add("fa-wind"),y.textContent=e.windSpeed+" "+("metric"===e.scale?"meter/sec":"miles/hour"),p.textContent="Change to "+("metric"===e.scale?"imperial":"metric");for(let t=0;t<e.dailyForecast.length;t++){const n=document.querySelector(`.day${t+1}`),o=document.querySelector(`.day${t+1} > .weekday`),c=document.querySelector(`.day${t+1} > .max-temp`),r=document.querySelector(`.day${t+1} > .min-temp`),d=document.querySelector(`.day${t+1} > .weather-day`),s=document.querySelector(`.day${t+1} > .icon`);o.innerHTML=a(e.time.getDay(),t,h),c.textContent=Math.floor(e.dailyForecast[t].temperatureMax)+" "+i.textContent,r.textContent=Math.floor(e.dailyForecast[t].temperatureMin)+" "+i.textContent,d.textContent=e.dailyForecast[t].weather,s.innerHTML=`<img src="../icons/${e.dailyForecast[t].icon}.png"></img>`,n.appendChild(o),n.appendChild(c),n.appendChild(r),n.appendChild(d),n.appendChild(s)}}const a=(e,t,n)=>{let a=e+t;return a>6&&(a-=7),n[a]},o=document.querySelector(".fa-magnifying-glass"),c=document.querySelector("input#search"),r=document.querySelector(".change-scale"),i=document.querySelector(".temperature-icon"),d=document.querySelector(".city-name");!async function(){o.addEventListener("click",(async()=>{try{n(await t(c.value))}catch(e){}})),r.addEventListener("click",(async()=>{if(i&&d){const e="ºC"===i.textContent?"imperial":"metric";n(await t(d.textContent,e))}}))}(),async function(){n(await t("Barcelona"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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U25HLFVBQ25DLElBRUk4RCxRQUQ2Qm5ELEVBQVlxRixFQUFZSSxRQUV4RCxNQUFNM0UsUUFJWHdFLEVBQWtCRSxpQkFBaUIsU0FBU25HLFVBQ3hDLEdBQUdxRSxHQUFjNkIsRUFBVyxDQUN4QixNQUFNaEcsRUFBbUMsT0FBM0JtRSxFQUFXdEQsWUFBdUIsV0FBYSxTQUU3RCtDLFFBRDRCbkQsRUFBWXVGLEVBQVduRixZQUFhYixRQ25CNUVtRyxHQUVBLGlCQUVJdkMsUUFEZ0JuRCxFQUFZLGNBRGhDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9mZXRjaEFQSS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9wcm9jZXNzRGF0YS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2xvZ2ljL2FkZEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFQSSAoY2l0eSxzY2FsZSl7XHJcbiAgICBjb25zdCBsb2FkZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5sb2FkZXInKVxyXG4gICAgdHJ5e1xyXG4gICAgICAgIC8vVE9ETyBSZWZhY3RvciB3aXRoIFByb21pc2UuYWxsXHJcbiAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgbG9hZGVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IFByb21pc2UucmFjZShbXHJcbiAgICAgICAgICAgIGZldGNoV2VhdGhlckFQSShjaXR5LHNjYWxlKSxcclxuICAgICAgICAgICAgdGltZW91dFByb21pc2UoNTAwMClcclxuICAgICAgICBdKS50aGVuKGZ1bmN0aW9uKHJlc29sdmUpe1xyXG4gICAgICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZXNvbHZlXHJcbiAgICAgICAgfSlcclxuICAgICAgICByZXR1cm4gZGF0YVxyXG5cclxuICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgIGxvYWRlckVsLnRleHRDb250ZW50ID0gJ0NpdHkgbm90IGZvdW5kISdcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuICAgICAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgfVxyXG4gICAgICAgICwyMDAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG59XHJcbiAgICBcclxuY29uc3QgZmV0Y2hXZWF0aGVyQVBJID0gYXN5bmMgKGNpdHksc2NhbGUpID0+e1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9xPSR7Y2l0eX0mdW5pdHM9JHtzY2FsZX0mYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgY29uc3QgcmVzcG9uc2UyID0gYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9vbmVjYWxsP2xhdD0ke2RhdGEuY29vcmQubGF0fSZsb249JHtkYXRhLmNvb3JkLmxvbn0mdW5pdHM9JHtzY2FsZX0mZXhjbHVkZT1taW51dGVseSxhbGVydHMmYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YTIgPSBhd2FpdCByZXNwb25zZTIuanNvbigpXHJcbiAgICByZXR1cm4gW2RhdGEsZGF0YTJdICBcclxufVxyXG4gICAgICAgIFxyXG5jb25zdCB0aW1lb3V0UHJvbWlzZSA9IChkZWxheSkgPT57XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUscmVqZWN0KSA9PntcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICByZWplY3QoJ1RpbWVvdXQnKVxyXG4gICAgICAgIH0sIGRlbGF5KVxyXG4gICAgfSlcclxufVxyXG4vLyBjb25zdCByZXNwb25zZTMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cy8xdkNXSGFDNWYydVMzeWhwd1diSUE2L2FsYnVtcz9hbGJ1bV90eXBlPVNJTkdMRSZvZmZzZXQ9MjAmbGltaXQ9MTAnKVxyXG4vLyBjb25zdCBkYXRhMyA9IGF3YWl0IHJlc3BvbnNlMy5qc29uKClcclxuLy8gY29uc29sZS5sb2coZGF0YTMpIiwiaW1wb3J0IHsgZmV0Y2hBUEkgfSBmcm9tICcuL2ZldGNoQVBJJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGNpdHksc2NhbGUgPSAnbWV0cmljJyl7XHJcbiAgICB0cnl7XHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGZldGNoQVBJKGNpdHksIHNjYWxlKVxyXG4gICAgICAgIGlmKCFkYXRhKSByZXR1cm5cclxuICAgICAgICBjb25zdCBjaXR5TmFtZSA9IGRhdGFbMF0ubmFtZVxyXG4gICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gZGF0YVswXS5zeXMuY291bnRyeVxyXG4gICAgICAgIGxldCB0aW1lID0gbmV3IERhdGUobmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygnZW4tVVMnLCB7dGltZVpvbmU6IGRhdGFbMV0udGltZXpvbmV9KSlcclxuXHJcbiAgICAgICAgY29uc3QgdGVtcGVyYXR1cmUgPSBNYXRoLmZsb29yKGRhdGFbMF0ubWFpbi50ZW1wKVxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXIgPSBkYXRhWzBdLndlYXRoZXJbMF0ubWFpblxyXG4gICAgICAgIGNvbnN0IGljb24gPSBkYXRhWzBdLndlYXRoZXJbMF0uaWNvblxyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJEZXNjID0gZGF0YVswXS53ZWF0aGVyWzBdLmRlc2NyaXB0aW9uXHJcbiAgICAgICAgY29uc3QgZmVlbHNMaWtlID0gTWF0aC5mbG9vcihkYXRhWzBdLm1haW4uZmVlbHNfbGlrZSlcclxuICAgICAgICBjb25zdCBodW1pZGl0eSA9IGRhdGFbMF0ubWFpbi5odW1pZGl0eVxyXG4gICAgICAgIGNvbnN0IHdpbmRTcGVlZCA9IE1hdGguZmxvb3IoZGF0YVswXS53aW5kLnNwZWVkKVxyXG5cclxuICAgICAgICBsZXQgZGFpbHlGb3JlY2FzdCA9IFtdXHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgOCA7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBkYXkgPSBkYXRhWzFdLmRhaWx5W2ldXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHtcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlTWF4IDogZGF5LnRlbXAubWF4LFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmVNaW4gOiBkYXkudGVtcC5taW4sXHJcbiAgICAgICAgICAgICAgICB3ZWF0aGVyIDogZGF5LndlYXRoZXJbMF0ubWFpbixcclxuICAgICAgICAgICAgICAgIGljb24gOiBkYXkud2VhdGhlclswXS5pY29uXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGFpbHlGb3JlY2FzdC5wdXNoKHZhbHVlcylcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGNpdHlOYW1lLFxyXG4gICAgICAgICAgICBjb3VudHJ5TmFtZSxcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgIHdlYXRoZXIsXHJcbiAgICAgICAgICAgIGljb24sXHJcbiAgICAgICAgICAgIHdlYXRoZXJEZXNjLFxyXG4gICAgICAgICAgICBmZWVsc0xpa2UsXHJcbiAgICAgICAgICAgIGh1bWlkaXR5LFxyXG4gICAgICAgICAgICB3aW5kU3BlZWQsXHJcbiAgICAgICAgICAgIHNjYWxlLFxyXG4gICAgICAgICAgICBkYWlseUZvcmVjYXN0XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImV4cG9ydCBmdW5jdGlvbiByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KXtcclxuICAgIGNvbnN0IHdlYXRoZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWluZm8nKVxyXG4gICAgY29uc3Qgd2VhdGhlckljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53ZWF0aGVyLWljb24nKVxyXG4gICAgY29uc3QgY2l0eUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktbmFtZScpXHJcbiAgICBjb25zdCB0aW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZGF0ZScpXHJcbiAgICBjb25zdCB0ZW1wZXJhdHVyZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBlcmF0dXJlLXZhbHVlJylcclxuICAgIGNvbnN0IHRlbXBJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtaWNvbicpXHJcbiAgICBjb25zdCBmZWVsc0xpa2VJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmVlbHMtbGlrZS1pY29uJylcclxuICAgIGNvbnN0IGZlZWxzTGlrZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWxzLWxpa2UtdmFsdWUnKVxyXG4gICAgY29uc3QgaHVtaWRpdHlJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaHVtaWRpdHktaWNvbicpXHJcbiAgICBjb25zdCBodW1pZGl0eUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5LXZhbHVlJylcclxuICAgIGNvbnN0IHdpbmRTcGVlZEljb25FbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53aW5kLXNwZWVkLWljb24nKVxyXG4gICAgY29uc3Qgd2luZFNwZWVkRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZC1zcGVlZC12YWx1ZScpXHJcbiAgICBjb25zdCBzY2FsZVRvQ2hhbmdlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhbmdlLXNjYWxlLWRlc2MnKVxyXG4gIFxyXG4gICAgd2VhdGhlckVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS53ZWF0aGVyXHJcbiAgICB3ZWF0aGVySWNvbkVsLmlubmVySFRNTCA9IGA8aW1nIHNyYz1cIi4uL2ljb25zLyR7ZGF0YVRvRGlzcGxheS5pY29ufS5wbmdcIj48L2ltZz5gXHJcbiAgICBjaXR5RWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LmNpdHlOYW1lICsgJywgJyArIGRhdGFUb0Rpc3BsYXkuY291bnRyeU5hbWVcclxuICAgIHRlbXBlcmF0dXJlRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LnRlbXBlcmF0dXJlXHJcbiAgICB0ZW1wSWNvbkVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS5zY2FsZSA9PT0gJ21ldHJpYycgPyAnwrpDJyA6ICfCukYnXHJcbiAgICBcclxuICAgIGNvbnN0IHdlZWtEYXlOYW1lcyA9IFsnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheScsICdTdW5kYXknXVxyXG4gICAgdGltZUVsLnRleHRDb250ZW50ID0gd2Vla0RheU5hbWVzW2RhdGFUb0Rpc3BsYXkudGltZS5nZXREYXkoKV0gKyAnLCAnIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKyBkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0RGF0ZSgpICsgJyAtICcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICArICgnMCcgKyBkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0SG91cnMoKSkuc2xpY2UoLTIpICsgJzonIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgKyAoJzAnKyBkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0TWludXRlcygpKS5zbGljZSgtMilcclxuICAgIFxyXG4gICAgZmVlbHNMaWtlSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXNvbGlkJykgXHJcbiAgICBmZWVsc0xpa2VJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtdGVtcGVyYXR1cmUtaGlnaCcpIFxyXG4gICAgZmVlbHNMaWtlRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LmZlZWxzTGlrZSArICcgJyArIHRlbXBJY29uRWwudGV4dENvbnRlbnRcclxuICAgIGh1bWlkaXR5SWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXNvbGlkJykgXHJcbiAgICBodW1pZGl0eUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS1kcm9wbGV0JykgXHJcbiAgICBodW1pZGl0eUVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS5odW1pZGl0eSArICcgJSdcclxuICAgIHdpbmRTcGVlZEljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS1zb2xpZCcpIFxyXG4gICAgd2luZFNwZWVkSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXdpbmQnKSBcclxuICAgIHdpbmRTcGVlZEVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS53aW5kU3BlZWQgKyAnICcgKyAoZGF0YVRvRGlzcGxheS5zY2FsZSA9PT0gJ21ldHJpYycgPyAnbWV0ZXIvc2VjJyA6ICdtaWxlcy9ob3VyJylcclxuICAgIHNjYWxlVG9DaGFuZ2VFbC50ZXh0Q29udGVudCA9ICdDaGFuZ2UgdG8gJyArIChkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyA/ICdpbXBlcmlhbCcgOiAnbWV0cmljJylcclxuICAgIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX1gKVxyXG4gICAgICAgIGNvbnN0IHdlZWtEYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC53ZWVrZGF5YClcclxuICAgICAgICBjb25zdCBtYXhUZW1wRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAubWF4LXRlbXBgKVxyXG4gICAgICAgIGNvbnN0IG1pblRlbXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC5taW4tdGVtcGApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLndlYXRoZXItZGF5YClcclxuICAgICAgICBjb25zdCB3ZWF0aGVySWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLmljb25gKVxyXG5cclxuICAgICAgICB3ZWVrRGF5RWwuaW5uZXJIVE1MID0gZ2V0V2Vla2RheU5hbWUoZGF0YVRvRGlzcGxheS50aW1lLmdldERheSgpLCBpLCB3ZWVrRGF5TmFtZXMpXHJcbiAgICAgICAgbWF4VGVtcEVsLnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0udGVtcGVyYXR1cmVNYXgpICsgJyAnICsgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgICAgIG1pblRlbXBFbC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IoZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLnRlbXBlcmF0dXJlTWluKSArICcgJysgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgICAgIHdlYXRoZXJFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS53ZWF0aGVyXHJcbiAgICAgICAgd2VhdGhlckljb25FbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIuLi9pY29ucy8ke2RhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS5pY29ufS5wbmdcIj48L2ltZz5gXHJcblxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh3ZWVrRGF5RWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKG1heFRlbXBFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobWluVGVtcEVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZCh3ZWF0aGVyRWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlYXRoZXJJY29uRWwpIFxyXG4gICAgfVxyXG59XHJcblxyXG5jb25zdCBnZXRXZWVrZGF5TmFtZSA9IChjdXJyZW50RGF5LGRheXNGcm9tVG9kYXksIHdlZWtEYXlOYW1lcykgPT57XHJcbiAgICAvLyBHZXQgdGhlIGN1cnJlbnQgZGF5LCB0byBrbm93IHdoZXJlIHRvIHN0YXJ0XHJcbiAgICBsZXQgZGF5VG9TZWxlY3QgPSBjdXJyZW50RGF5ICsgZGF5c0Zyb21Ub2RheVxyXG4gICAgaWYoZGF5VG9TZWxlY3QgPiA2KXtcclxuICAgICAgICBkYXlUb1NlbGVjdCAtPSA3XHJcbiAgICB9XHJcbiAgICByZXR1cm4gd2Vla0RheU5hbWVzW2RheVRvU2VsZWN0XVxyXG59IiwiaW1wb3J0IHsgcHJvY2Vzc0RhdGEgfSBmcm9tICcuL3Byb2Nlc3NEYXRhJ1xyXG5pbXBvcnQgeyByZW5kZXJTdGF0aWNFbGVtZW50cyB9IGZyb20gJy4uL3ZpZXcvcmVuZGVyU3RhdGljRWxlbWVudHMnXHJcblxyXG5cclxuY29uc3Qgc2VhcmNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhLW1hZ25pZnlpbmctZ2xhc3MnKVxyXG4vLyBGaXhlZCB0byBhIGNpdHkgZm9yIHRlc3RpbmdcclxuY29uc3Qgc2VhcmNoSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dCNzZWFyY2gnKVxyXG5jb25zdCBjaGFuZ2VTY2FsZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFuZ2Utc2NhbGUnKVxyXG5jb25zdCB0ZW1wSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBlcmF0dXJlLWljb24nKVxyXG5jb25zdCBjaXR5TmFtZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNpdHktbmFtZScpXHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkRXZlbnRMaXN0ZW5lcnMoKXtcclxuICAgIHNlYXJjaEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+e1xyXG4gICAgICAgIHRyeXtcclxuICAgICAgICAgICAgY29uc3QgZGF0YVRvRGlzcGxheSA9ICBhd2FpdCBwcm9jZXNzRGF0YShzZWFyY2hJbnB1dC52YWx1ZSlcclxuICAgICAgICAgICAgcmVuZGVyU3RhdGljRWxlbWVudHMoZGF0YVRvRGlzcGxheSlcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNoYW5nZVNjYWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgaWYodGVtcEljb25FbCAmJiBjaXR5TmFtZUVsKXtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0ZW1wSWNvbkVsLnRleHRDb250ZW50ID09PSAnwrpDJyA/ICdpbXBlcmlhbCcgOiAnbWV0cmljJ1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVG9EaXNwbGF5ID0gYXdhaXQgcHJvY2Vzc0RhdGEoY2l0eU5hbWVFbC50ZXh0Q29udGVudCwgc2NhbGUpXHJcbiAgICAgICAgICAgIHJlbmRlclN0YXRpY0VsZW1lbnRzKGRhdGFUb0Rpc3BsYXkpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0iLCJpbXBvcnQge3Byb2Nlc3NEYXRhfSBmcm9tICcuL2xvZ2ljL3Byb2Nlc3NEYXRhJ1xyXG5pbXBvcnQge3JlbmRlclN0YXRpY0VsZW1lbnRzfSBmcm9tICcuL3ZpZXcvcmVuZGVyU3RhdGljRWxlbWVudHMnXHJcbmltcG9ydCB7IGFkZEV2ZW50TGlzdGVuZXJzIH0gZnJvbSAnLi9sb2dpYy9hZGRFdmVudExpc3RlbmVycydcclxuXHJcbmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4oYXN5bmMgZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IGEgPSBhd2FpdCBwcm9jZXNzRGF0YSgnQmFyY2Vsb25hJylcclxuICAgIHJlbmRlclN0YXRpY0VsZW1lbnRzKGEpXHJcbn0pKCkiXSwibmFtZXMiOlsiZmV0Y2hXZWF0aGVyQVBJIiwiYXN5bmMiLCJjaXR5Iiwic2NhbGUiLCJyZXNwb25zZSIsImZldGNoIiwiZGF0YSIsImpzb24iLCJyZXNwb25zZTIiLCJjb29yZCIsImxhdCIsImxvbiIsInByb2Nlc3NEYXRhIiwibG9hZGVyRWwiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsIlByb21pc2UiLCJyYWNlIiwiZGVsYXkiLCJyZXNvbHZlIiwicmVqZWN0Iiwic2V0VGltZW91dCIsInRoZW4iLCJlcnIiLCJmZXRjaEFQSSIsImNpdHlOYW1lIiwibmFtZSIsImNvdW50cnlOYW1lIiwic3lzIiwiY291bnRyeSIsInRpbWUiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ0aW1lWm9uZSIsInRpbWV6b25lIiwidGVtcGVyYXR1cmUiLCJNYXRoIiwiZmxvb3IiLCJtYWluIiwidGVtcCIsIndlYXRoZXIiLCJpY29uIiwid2VhdGhlckRlc2MiLCJkZXNjcmlwdGlvbiIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmQiLCJzcGVlZCIsImRhaWx5Rm9yZWNhc3QiLCJpIiwiZGF5IiwiZGFpbHkiLCJ2YWx1ZXMiLCJ0ZW1wZXJhdHVyZU1heCIsIm1heCIsInRlbXBlcmF0dXJlTWluIiwibWluIiwicHVzaCIsInJlbmRlclN0YXRpY0VsZW1lbnRzIiwiZGF0YVRvRGlzcGxheSIsIndlYXRoZXJFbCIsIndlYXRoZXJJY29uRWwiLCJjaXR5RWwiLCJ0aW1lRWwiLCJ0ZW1wZXJhdHVyZUVsIiwidGVtcEljb25FbCIsImZlZWxzTGlrZUljb25FbCIsImZlZWxzTGlrZUVsIiwiaHVtaWRpdHlJY29uRWwiLCJodW1pZGl0eUVsIiwid2luZFNwZWVkSWNvbkVsIiwid2luZFNwZWVkRWwiLCJzY2FsZVRvQ2hhbmdlRWwiLCJpbm5lckhUTUwiLCJ3ZWVrRGF5TmFtZXMiLCJnZXREYXkiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJzbGljZSIsImdldE1pbnV0ZXMiLCJhZGQiLCJsZW5ndGgiLCJkaXYiLCJ3ZWVrRGF5RWwiLCJtYXhUZW1wRWwiLCJtaW5UZW1wRWwiLCJnZXRXZWVrZGF5TmFtZSIsImFwcGVuZENoaWxkIiwiY3VycmVudERheSIsImRheXNGcm9tVG9kYXkiLCJkYXlUb1NlbGVjdCIsInNlYXJjaEJ1dHRvbiIsInNlYXJjaElucHV0IiwiY2hhbmdlU2NhbGVCdXR0b24iLCJjaXR5TmFtZUVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsInZhbHVlIiwiYWRkRXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9