(()=>{"use strict";const e=async(e,t)=>{const a=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=76d5136cd55d14c88e4d9549d0f550f2`),n=await a.json(),o=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${n.coord.lat}&lon=${n.coord.lon}&units=${t}&exclude=minutely,alerts&appid=76d5136cd55d14c88e4d9549d0f550f2`);return{dataSet1:n,dataSet2:await o.json()}};async function t(t,a="metric"){try{const n=await async function(t,a){const n=document.querySelector(".loader");try{return n.textContent="Loading ...",n.classList.toggle("visible"),await Promise.race([e(t,a),(o=5e3,new Promise((e=>{setTimeout((()=>{e("Timeout")}),o)})))]).then((e=>(n.classList.toggle("visible"),e)))}catch(e){return n.textContent="City not found!",void setTimeout((()=>{n.classList.toggle("visible"),n.textContent="Loading ..."}),2e3)}var o}(t,a);if(!n)return;const o=n.dataSet1.name,c=n.dataSet1.sys.country;let r=new Date((new Date).toLocaleString("en-US",{timeZone:n.timezone}));const i=Math.floor(n.dataSet1.main.temp),d=n.dataSet1.weather[0].main,l=n.dataSet1.weather[0].icon,u=n.dataSet1.weather[0].description,s=Math.floor(n.dataSet1.main.feels_like),m=n.dataSet1.main.humidity,y=Math.floor(n.dataSet1.wind.speed);let h=[];for(let e=1;e<8;e++){const t=n.dataSet2.daily[e],a={temperatureMax:t.temp.max,temperatureMin:t.temp.min,weather:t.weather[0].main,icon:t.weather[0].icon};h.push(a)}return{cityName:o,countryName:c,time:r,temperature:i,weather:d,weatherDesc:u,icon:l,feelsLike:s,humidity:m,windSpeed:y,scale:a,dailyForecast:h}}catch(e){return}}function a(e){const t=document.querySelector("body"),a=document.querySelector(".weather-info"),o=document.querySelector(".weather-icon"),c=document.querySelector(".city-name"),r=document.querySelector(".date"),i=document.querySelector(".temperature-value"),d=document.querySelector(".temperature-icon"),l=document.querySelector(".feels-like-icon"),u=document.querySelector(".feels-like-value"),s=document.querySelector(".humidity-icon"),m=document.querySelector(".humidity-value"),y=document.querySelector(".wind-speed-icon"),h=document.querySelector(".wind-speed-value"),p=document.querySelector(".change-scale-desc"),S=document.querySelector("input#search"),f=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];a.textContent=e.weather,o.innerHTML=`<img src="../icons/${e.icon}.png"></img>`,c.textContent=e.cityName+", "+e.countryName,i.textContent=e.temperature,d.textContent="metric"===e.scale?"ºC":"ºF",r.textContent=f[e.time.getDay()]+", "+e.time.getDate()+" - "+("0"+e.time.getHours()).slice(-2)+":"+("0"+e.time.getMinutes()).slice(-2),l.classList.add("fa-solid"),l.classList.add("fa-temperature-high"),u.textContent=e.feelsLike+" "+d.textContent,s.classList.add("fa-solid"),s.classList.add("fa-droplet"),m.textContent=e.humidity+" %",y.classList.add("fa-solid"),y.classList.add("fa-wind"),S.value="",t.style.backgroundColor="blue",h.textContent=e.windSpeed+" "+("metric"===e.scale?"meter/sec":"miles/hour"),p.textContent="Change to "+("metric"===e.scale?"imperial":"metric");for(let t=0;t<e.dailyForecast.length;t++){const a=document.querySelector(`.day${t+1}`),o=document.querySelector(`.day${t+1} > .weekday`),c=document.querySelector(`.day${t+1} > .max-temp`),r=document.querySelector(`.day${t+1} > .min-temp`),i=document.querySelector(`.day${t+1} > .weather-day`),l=document.querySelector(`.day${t+1} > .icon`);o.innerHTML=n(e.time.getDay(),t,f),c.textContent=Math.floor(e.dailyForecast[t].temperatureMax)+" "+d.textContent,r.textContent=Math.floor(e.dailyForecast[t].temperatureMin)+" "+d.textContent,i.textContent=e.dailyForecast[t].weather,l.innerHTML=`<img src="../icons/${e.dailyForecast[t].icon}.png"></img>`,a.appendChild(o),a.appendChild(c),a.appendChild(r),a.appendChild(i),a.appendChild(l)}}const n=(e,t,a)=>{let n=e+t;return n>6&&(n-=7),a[n]},o=document.querySelector(".fa-magnifying-glass"),c=document.querySelector("input#search"),r=document.querySelector(".change-scale"),i=document.querySelector(".temperature-icon"),d=document.querySelector(".city-name");!async function(){o.addEventListener("click",(async()=>{try{a(await t(c.value))}catch(e){}})),r.addEventListener("click",(async()=>{if(i&&d)try{const e="ºC"===i.textContent?"imperial":"metric";a(await t(d.textContent,e))}catch(e){}}))}(),async function(){a(await t("Barcelona"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjLGlCQUMzQ3VELEVBQWF4RCxTQUFTQyxjQUFjLHFCQUNwQ3VGLEVBQWF4RixTQUFTQyxjQUFjLGVBRW5DaEIsaUJBQ0hxRyxFQUFhRyxpQkFBaUIsU0FBU3hHLFVBQ25DLElBRUkrRCxRQUQ2Qm5ELEVBQVltRSxFQUFZUyxRQUV4RCxNQUFNOUQsUUFJWDRFLEVBQWtCRSxpQkFBaUIsU0FBU3hHLFVBQ3hDLEdBQUd1RSxHQUFjZ0MsRUFDYixJQUNJLE1BQU1yRyxFQUFtQyxPQUEzQnFFLEVBQVd0RCxZQUF1QixXQUFhLFNBRTdEOEMsUUFENEJuRCxFQUFZMkYsRUFBV3RGLFlBQWFmLElBRW5FLE1BQU13QixRQ3BCbkIrRSxHQUVBLGlCQUVJMUMsUUFEZ0JuRCxFQUFZLGNBRGhDLEkiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9mZXRjaEFQSS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy9sb2dpYy9wcm9jZXNzRGF0YS5qcyIsIndlYnBhY2s6Ly9qcy10b3Atd2VhdGhlcmFwcC8uL3NyYy92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2xvZ2ljL2FkZEV2ZW50TGlzdGVuZXJzLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaEFQSSAoY2l0eSxzY2FsZSl7XHJcbiAgICAvLyBHZXQgbG9hZGVyIGVsZW1lbnQgdG8gdG9vZ2xlIGl0J3MgZGlzcGxheSBwcm9wZXJ0eSB3aGlsZSBhd2FpdGluZyBmZXRjaFxyXG4gICAgY29uc3QgbG9hZGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGVyJylcclxuICAgIHRyeXtcclxuICAgICAgICAvLyBEaXNwbGF5IHRoZSBsb2FkZXIgZGl2IHdoaWxlIHRoZSBkYXRhIGlzIGZldGNoaW5nXHJcbiAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgbG9hZGVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVHJ5IHRvIGZldGNoIGRhdGEgaW4gbGVzcyB0aGFuIDUgc2Vjb25kc1xyXG4gICAgICAgIGNvbnN0IHdlYXRoZXJEYXRhID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcclxuICAgICAgICAgICAgZmV0Y2hXZWF0aGVyQVBJKGNpdHksc2NhbGUpLFxyXG4gICAgICAgICAgICB0aW1lb3V0UHJvbWlzZSg1MDAwKVxyXG4gICAgICAgIF0pLnRoZW4oKHdlYXRoZXJEYXRhKT0+e1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSWYgcmVzb2x2ZSwgdG9vZ2xlIGRpc3BsYXkgdG8gbm90IHNob3dcclxuICAgICAgICAgICAgbG9hZGVyRWwuY2xhc3NMaXN0LnRvZ2dsZSgndmlzaWJsZScpXHJcbiAgICAgICAgICAgIHJldHVybiB3ZWF0aGVyRGF0YVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgcmV0dXJuIHdlYXRoZXJEYXRhXHJcblxyXG4gICAgfWNhdGNoKGVycil7XHJcblxyXG4gICAgICAgIC8vIElmIHJlamVjdGVkLCBzaG93IGVycm9yIG1lc3NhZ2UgZm9yIDJcclxuICAgICAgICAvLyBzZWNvbmRzIGFuZCB0b29nbGUgZGlzcGxheSB0byBub3cgc2hvd1xyXG4gICAgICAgIGxvYWRlckVsLnRleHRDb250ZW50ID0gJ0NpdHkgbm90IGZvdW5kISdcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuICAgICAgICAgICAgbG9hZGVyRWwudGV4dENvbnRlbnQgPSAnTG9hZGluZyAuLi4nXHJcbiAgICAgICAgfSwyMDAwKVxyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG59XHJcbmNvbnN0IHRpbWVvdXRQcm9taXNlID0gKGRlbGF5KSA9PntcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVqZWN0KSA9PntcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+e1xyXG4gICAgICAgICAgICByZWplY3QoJ1RpbWVvdXQnKVxyXG4gICAgICAgIH0sIGRlbGF5KVxyXG4gICAgfSlcclxufVxyXG4gICAgXHJcbmNvbnN0IGZldGNoV2VhdGhlckFQSSA9IGFzeW5jIChjaXR5LHNjYWxlKSA9PntcclxuICAgIGNvbnN0IHJlc3BvbnNlMSA9IFxyXG4gICAgICBhd2FpdCBmZXRjaChgaHR0cDovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvd2VhdGhlcj9xPSR7Y2l0eX0mdW5pdHM9JHtzY2FsZX0mYXBwaWQ9NzZkNTEzNmNkNTVkMTRjODhlNGQ5NTQ5ZDBmNTUwZjJgKVxyXG4gICAgY29uc3QgZGF0YVNldDEgPSBhd2FpdCByZXNwb25zZTEuanNvbigpXHJcbiAgICBcclxuICAgIGNvbnN0IHJlc3BvbnNlMiA9ICBcclxuICAgICAgYXdhaXQgZmV0Y2goYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS9vbmVjYWxsP2xhdD0ke2RhdGFTZXQxLmNvb3JkLmxhdH0mbG9uPSR7ZGF0YVNldDEuY29vcmQubG9ufSZ1bml0cz0ke3NjYWxlfSZleGNsdWRlPW1pbnV0ZWx5LGFsZXJ0cyZhcHBpZD03NmQ1MTM2Y2Q1NWQxNGM4OGU0ZDk1NDlkMGY1NTBmMmApXHJcbiAgICBjb25zdCBkYXRhU2V0MiA9IGF3YWl0IHJlc3BvbnNlMi5qc29uKClcclxuXHJcbiAgICByZXR1cm4ge2RhdGFTZXQxLGRhdGFTZXQyfSBcclxufVxyXG4gICAgIiwiaW1wb3J0IHsgZmV0Y2hBUEkgfSBmcm9tICcuL2ZldGNoQVBJJ1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGNpdHksc2NhbGUgPSAnbWV0cmljJyl7XHJcbiAgICB0cnl7XHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckRhdGEgPSBhd2FpdCBmZXRjaEFQSShjaXR5LCBzY2FsZSlcclxuICAgICAgICBpZighd2VhdGhlckRhdGEpIHJldHVyblxyXG4gICAgICAgIGNvbnN0IGNpdHlOYW1lID0gd2VhdGhlckRhdGEuZGF0YVNldDEubmFtZVxyXG4gICAgICAgIGNvbnN0IGNvdW50cnlOYW1lID0gd2VhdGhlckRhdGEuZGF0YVNldDEuc3lzLmNvdW50cnlcclxuICAgICAgICBsZXQgdGltZSA9IG5ldyBEYXRlKG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoJ2VuLVVTJywge3RpbWVab25lOiB3ZWF0aGVyRGF0YS50aW1lem9uZX0pKVxyXG4gICAgICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gTWF0aC5mbG9vcih3ZWF0aGVyRGF0YS5kYXRhU2V0MS5tYWluLnRlbXApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlciA9IHdlYXRoZXJEYXRhLmRhdGFTZXQxLndlYXRoZXJbMF0ubWFpblxyXG4gICAgICAgIGNvbnN0IGljb24gPSB3ZWF0aGVyRGF0YS5kYXRhU2V0MS53ZWF0aGVyWzBdLmljb25cclxuICAgICAgICBjb25zdCB3ZWF0aGVyRGVzYyA9IHdlYXRoZXJEYXRhLmRhdGFTZXQxLndlYXRoZXJbMF0uZGVzY3JpcHRpb25cclxuICAgICAgICBjb25zdCBmZWVsc0xpa2UgPSBNYXRoLmZsb29yKHdlYXRoZXJEYXRhLmRhdGFTZXQxLm1haW4uZmVlbHNfbGlrZSlcclxuICAgICAgICBjb25zdCBodW1pZGl0eSA9IHdlYXRoZXJEYXRhLmRhdGFTZXQxLm1haW4uaHVtaWRpdHlcclxuICAgICAgICBjb25zdCB3aW5kU3BlZWQgPSBNYXRoLmZsb29yKHdlYXRoZXJEYXRhLmRhdGFTZXQxLndpbmQuc3BlZWQpXHJcblxyXG4gICAgICAgIGxldCBkYWlseUZvcmVjYXN0ID0gW11cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4IDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdlZWtEYXkgPSB3ZWF0aGVyRGF0YS5kYXRhU2V0Mi5kYWlseVtpXVxyXG4gICAgICAgICAgICBjb25zdCB2YWx1ZXMgPSB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZU1heCA6IHdlZWtEYXkudGVtcC5tYXgsXHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZU1pbiA6IHdlZWtEYXkudGVtcC5taW4sXHJcbiAgICAgICAgICAgICAgICB3ZWF0aGVyIDogd2Vla0RheS53ZWF0aGVyWzBdLm1haW4sXHJcbiAgICAgICAgICAgICAgICBpY29uIDogd2Vla0RheS53ZWF0aGVyWzBdLmljb25cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkYWlseUZvcmVjYXN0LnB1c2godmFsdWVzKVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBcclxuICAgICAgICAgICAgY2l0eU5hbWUsXHJcbiAgICAgICAgICAgIGNvdW50cnlOYW1lLFxyXG4gICAgICAgICAgICB0aW1lLFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgd2VhdGhlcixcclxuICAgICAgICAgICAgd2VhdGhlckRlc2MsXHJcbiAgICAgICAgICAgIGljb24sXHJcbiAgICAgICAgICAgIGZlZWxzTGlrZSxcclxuICAgICAgICAgICAgaHVtaWRpdHksXHJcbiAgICAgICAgICAgIHdpbmRTcGVlZCxcclxuICAgICAgICAgICAgc2NhbGUsXHJcbiAgICAgICAgICAgIGRhaWx5Rm9yZWNhc3RcclxuICAgICAgICB9XHJcblxyXG4gICAgfSBjYXRjaChlcnIpe1xyXG4gICAgICAgIHJldHVyblxyXG4gICAgfVxyXG59XHJcblxyXG5cclxuIiwiZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclN0YXRpY0VsZW1lbnRzKGRhdGFUb0Rpc3BsYXkpe1xyXG4gICAgY29uc3QgYm9keUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpXHJcbiAgICBjb25zdCB3ZWF0aGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1pbmZvJylcclxuICAgIGNvbnN0IHdlYXRoZXJJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1pY29uJylcclxuICAgIGNvbnN0IGNpdHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5LW5hbWUnKVxyXG4gICAgY29uc3QgdGltZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKVxyXG4gICAgY29uc3QgdGVtcGVyYXR1cmVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wZXJhdHVyZS12YWx1ZScpXHJcbiAgICBjb25zdCB0ZW1wSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBlcmF0dXJlLWljb24nKVxyXG4gICAgY29uc3QgZmVlbHNMaWtlSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWxzLWxpa2UtaWNvbicpXHJcbiAgICBjb25zdCBmZWVsc0xpa2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVscy1saWtlLXZhbHVlJylcclxuICAgIGNvbnN0IGh1bWlkaXR5SWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5LWljb24nKVxyXG4gICAgY29uc3QgaHVtaWRpdHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eS12YWx1ZScpXHJcbiAgICBjb25zdCB3aW5kU3BlZWRJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZC1zcGVlZC1pY29uJylcclxuICAgIGNvbnN0IHdpbmRTcGVlZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQtc3BlZWQtdmFsdWUnKVxyXG4gICAgY29uc3Qgc2NhbGVUb0NoYW5nZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1zY2FsZS1kZXNjJylcclxuICAgIGNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXQjc2VhcmNoJylcclxuICAgIGNvbnN0IHdlZWtEYXlOYW1lcyA9IFtcclxuICAgICAgICAnTW9uZGF5JywgXHJcbiAgICAgICAgJ1R1ZXNkYXknLFxyXG4gICAgICAgICdXZWRuZXNkYXknLFxyXG4gICAgICAgICdUaHVyc2RheScsXHJcbiAgICAgICAgJ0ZyaWRheScsXHJcbiAgICAgICAgJ1NhdHVyZGF5JyxcclxuICAgICAgICAnU3VuZGF5J1xyXG4gICAgXVxyXG5cclxuICAgIHdlYXRoZXJFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkud2VhdGhlclxyXG4gICAgd2VhdGhlckljb25FbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIuLi9pY29ucy8ke2RhdGFUb0Rpc3BsYXkuaWNvbn0ucG5nXCI+PC9pbWc+YFxyXG4gICAgY2l0eUVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS5jaXR5TmFtZSArICcsICcgKyBkYXRhVG9EaXNwbGF5LmNvdW50cnlOYW1lXHJcbiAgICB0ZW1wZXJhdHVyZUVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS50ZW1wZXJhdHVyZVxyXG4gICAgdGVtcEljb25FbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnID8gJ8K6QycgOiAnwrpGJ1xyXG4gICAgXHJcbiAgICB0aW1lRWwudGV4dENvbnRlbnQgPSB3ZWVrRGF5TmFtZXNbZGF0YVRvRGlzcGxheS50aW1lLmdldERheSgpXSArICcsICcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXREYXRlKCkgKyAnIC0gJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICsgKCcwJyArIGRhdGFUb0Rpc3BsYXkudGltZS5nZXRIb3VycygpKS5zbGljZSgtMikgKyAnOicgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICArICgnMCcrIGRhdGFUb0Rpc3BsYXkudGltZS5nZXRNaW51dGVzKCkpLnNsaWNlKC0yKVxyXG4gICAgXHJcbiAgICBmZWVsc0xpa2VJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGZlZWxzTGlrZUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS10ZW1wZXJhdHVyZS1oaWdoJykgXHJcbiAgICBmZWVsc0xpa2VFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuZmVlbHNMaWtlICsgJyAnICsgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgaHVtaWRpdHlJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIGh1bWlkaXR5SWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLWRyb3BsZXQnKSBcclxuICAgIGh1bWlkaXR5RWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5Lmh1bWlkaXR5ICsgJyAlJ1xyXG4gICAgd2luZFNwZWVkSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXNvbGlkJykgXHJcbiAgICB3aW5kU3BlZWRJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtd2luZCcpIFxyXG4gICAgc2VhcmNoSW5wdXQudmFsdWUgPSAnJ1xyXG4gICAgYm9keUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICdibHVlJ1xyXG5cclxuICAgIHdpbmRTcGVlZEVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS53aW5kU3BlZWQgKyAnICcgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICsgKGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnbWV0ZXIvc2VjJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogJ21pbGVzL2hvdXInKVxyXG5cclxuICAgIHNjYWxlVG9DaGFuZ2VFbC50ZXh0Q29udGVudCA9ICdDaGFuZ2UgdG8gJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChkYXRhVG9EaXNwbGF5LnNjYWxlID09PSAnbWV0cmljJyBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyAnaW1wZXJpYWwnIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6ICdtZXRyaWMnKVxyXG4gIFxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX1gKVxyXG4gICAgICAgIGNvbnN0IHdlZWtEYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC53ZWVrZGF5YClcclxuICAgICAgICBjb25zdCBtYXhUZW1wRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAubWF4LXRlbXBgKVxyXG4gICAgICAgIGNvbnN0IG1pblRlbXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC5taW4tdGVtcGApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLndlYXRoZXItZGF5YClcclxuICAgICAgICBjb25zdCB3ZWF0aGVySWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLmljb25gKVxyXG4gICAgICBcclxuICAgICAgICB3ZWVrRGF5RWwuaW5uZXJIVE1MID0gZ2V0V2Vla2RheU5hbWUoZGF0YVRvRGlzcGxheS50aW1lLmdldERheSgpLCBpLCB3ZWVrRGF5TmFtZXMpXHJcbiAgICAgICAgbWF4VGVtcEVsLnRleHRDb250ZW50ID0gTWF0aC5mbG9vcihkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0udGVtcGVyYXR1cmVNYXgpICsgJyAnICsgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgICAgIG1pblRlbXBFbC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IoZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLnRlbXBlcmF0dXJlTWluKSArICcgJysgdGVtcEljb25FbC50ZXh0Q29udGVudFxyXG4gICAgICAgIHdlYXRoZXJFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS53ZWF0aGVyXHJcbiAgICAgICAgd2VhdGhlckljb25FbC5pbm5lckhUTUwgPSBgPGltZyBzcmM9XCIuLi9pY29ucy8ke2RhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS5pY29ufS5wbmdcIj48L2ltZz5gXHJcbiAgICAgICAgXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlZWtEYXlFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobWF4VGVtcEVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChtaW5UZW1wRWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlYXRoZXJFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQod2VhdGhlckljb25FbCkgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGdldFdlZWtkYXlOYW1lID0gKGN1cnJlbnREYXksZGF5c0Zyb21Ub2RheSwgd2Vla0RheU5hbWVzKSA9PntcclxuICBcclxuICAgIC8vIFdlIHN1YnN0cmFjdCA3IGZyb20gdGhlIGRheVRvU2VsZWN0IHZhbHVlIGluIGNhc2UgdGhlIG51bWJlclxyXG4gICAgLy8gc3VycGFzc2VzICdTdW5kYXknLCBzbyBpbiB0aGF0IGNhc2UsXHJcbiAgICAvLyBpdCBjYW4gc3RhcnQgY291bnRpbmcgZnJvbSBNb25kYXlcclxuICAgIGxldCBkYXlUb1NlbGVjdCA9IGN1cnJlbnREYXkgKyBkYXlzRnJvbVRvZGF5XHJcbiAgICBpZihkYXlUb1NlbGVjdCA+IDYpe1xyXG4gICAgICAgIGRheVRvU2VsZWN0IC09IDdcclxuICAgIH1cclxuICAgIHJldHVybiB3ZWVrRGF5TmFtZXNbZGF5VG9TZWxlY3RdXHJcbn1cclxuXHJcbi8vIGNvbnN0IGNoYW5nZUJhY2tncm91bmQgPSAod2VhdGhlcixob3VyKSA9PntcclxuLy8gLy8gQ2hhbmdlIGJhY2tncm91bmQgYmFzZWQgb24gd2VhdGhlciBhbmQgaG91ciB2YWx1ZXNcclxuLy8gLy8gYW5kIGNoYW5nZSBmb250IGNvbG9yIGlmIG5lZWRlZFxyXG4vLyAgICAgaWYoaG91ciA+PSA2ICYmIGhvdXIgPD0gMjApe1xyXG4vLyAgICAgICAgIGNvbnN0IGJhY2tncm91bmRzRGF5ID0ge1xyXG4vLyAgICAgICAgICAgICAnVGh1bmRlcnN0b3JtJzogJycsXHJcbi8vICAgICAgICAgICAgICdEcml6emxlJzogJycsXHJcbi8vICAgICAgICAgICAgICdSYWluJzogJycsXHJcbi8vICAgICAgICAgICAgICdTbm93JyA6ICcnLCBcclxuLy8gICAgICAgICAgICAgJ0NsZWFyJzogJy9pbWFnZXMvZGF5LWNsZWFyLmpwZycsXHJcbi8vICAgICAgICAgICAgICdDbG91ZHMnOicnLFxyXG4vLyAgICAgICAgICAgICAvLyBcclxuLy8gICAgICAgICAgICAgJ01pc3QnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1Ntb2tlJzogJycsXHJcbi8vICAgICAgICAgICAgICdIYXplJzogJycsXHJcbi8vICAgICAgICAgICAgICdEdXN0JzogJycsXHJcbi8vICAgICAgICAgICAgICdGb2cnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1NhbmQnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0R1c3QnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0FzaCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnU3F1YWxsJzogJycsXHJcbi8vICAgICAgICAgICAgICdUb3JuYWRvJzogJycsXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIHJldHVybiBiYWNrZ3JvdW5kc0RheS53ZWF0aGVyXHJcbi8vICAgICB9XHJcbi8vICAgICBlbHNle1xyXG4vLyAgICAgICAgIGNvbnN0IGJhY2tncm91bmRzTmlnaHQgPSB7XHJcbi8vICAgICAgICAgICAgICdUaHVuZGVyc3Rvcm0nOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0RyaXp6bGUnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1JhaW4nOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1Nub3cnIDogJycsIFxyXG4vLyAgICAgICAgICAgICAnQ2xlYXInOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0Nsb3Vkcyc6JycsXHJcbi8vICAgICAgICAgICAgIC8vIFxyXG4vLyAgICAgICAgICAgICAnTWlzdCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnU21va2UnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0hhemUnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0R1c3QnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ0ZvZyc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnU2FuZCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnRHVzdCc6ICcnLFxyXG4vLyAgICAgICAgICAgICAnQXNoJzogJycsXHJcbi8vICAgICAgICAgICAgICdTcXVhbGwnOiAnJyxcclxuLy8gICAgICAgICAgICAgJ1Rvcm5hZG8nOiAnJyxcclxuXHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIHJldHVybiBiYWNrZ3JvdW5kc05pZ2h0LndlYXRoZXJcclxuLy8gICAgIH1cclxuLy8gfSIsImltcG9ydCB7IHByb2Nlc3NEYXRhIH0gZnJvbSAnLi9wcm9jZXNzRGF0YSdcclxuaW1wb3J0IHsgcmVuZGVyU3RhdGljRWxlbWVudHMgfSBmcm9tICcuLi92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzJ1xyXG5cclxuY29uc3Qgc2VhcmNoQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZhLW1hZ25pZnlpbmctZ2xhc3MnKVxyXG5jb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0I3NlYXJjaCcpXHJcbmNvbnN0IGNoYW5nZVNjYWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1zY2FsZScpXHJcbmNvbnN0IHRlbXBJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtaWNvbicpXHJcbmNvbnN0IGNpdHlOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eS1uYW1lJylcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpe1xyXG4gICAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVG9EaXNwbGF5ID0gIGF3YWl0IHByb2Nlc3NEYXRhKHNlYXJjaElucHV0LnZhbHVlKVxyXG4gICAgICAgICAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KVxyXG4gICAgICAgIH1jYXRjaChlcnIpe1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgY2hhbmdlU2NhbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBhc3luYyAoKSA9PntcclxuICAgICAgICBpZih0ZW1wSWNvbkVsICYmIGNpdHlOYW1lRWwpe1xyXG4gICAgICAgICAgICB0cnl7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzY2FsZSA9IHRlbXBJY29uRWwudGV4dENvbnRlbnQgPT09ICfCukMnID8gJ2ltcGVyaWFsJyA6ICdtZXRyaWMnXHJcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRhVG9EaXNwbGF5ID0gYXdhaXQgcHJvY2Vzc0RhdGEoY2l0eU5hbWVFbC50ZXh0Q29udGVudCwgc2NhbGUpXHJcbiAgICAgICAgICAgICAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhkYXRhVG9EaXNwbGF5KVxyXG4gICAgICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICByZXR1cm5cclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59IiwiaW1wb3J0IHtwcm9jZXNzRGF0YX0gZnJvbSAnLi9sb2dpYy9wcm9jZXNzRGF0YSdcclxuaW1wb3J0IHtyZW5kZXJTdGF0aWNFbGVtZW50c30gZnJvbSAnLi92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzJ1xyXG5pbXBvcnQgeyBhZGRFdmVudExpc3RlbmVycyB9IGZyb20gJy4vbG9naWMvYWRkRXZlbnRMaXN0ZW5lcnMnXHJcblxyXG5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cclxuKGFzeW5jIGZ1bmN0aW9uKCl7XHJcbiAgICBjb25zdCBhID0gYXdhaXQgcHJvY2Vzc0RhdGEoJ0JhcmNlbG9uYScpXHJcbiAgICByZW5kZXJTdGF0aWNFbGVtZW50cyhhKVxyXG59KSgpIl0sIm5hbWVzIjpbImZldGNoV2VhdGhlckFQSSIsImFzeW5jIiwiY2l0eSIsInNjYWxlIiwicmVzcG9uc2UxIiwiZmV0Y2giLCJkYXRhU2V0MSIsImpzb24iLCJyZXNwb25zZTIiLCJjb29yZCIsImxhdCIsImxvbiIsImRhdGFTZXQyIiwicHJvY2Vzc0RhdGEiLCJ3ZWF0aGVyRGF0YSIsImxvYWRlckVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJQcm9taXNlIiwicmFjZSIsImRlbGF5IiwicmVqZWN0Iiwic2V0VGltZW91dCIsInRoZW4iLCJlcnIiLCJmZXRjaEFQSSIsImNpdHlOYW1lIiwibmFtZSIsImNvdW50cnlOYW1lIiwic3lzIiwiY291bnRyeSIsInRpbWUiLCJEYXRlIiwidG9Mb2NhbGVTdHJpbmciLCJ0aW1lWm9uZSIsInRpbWV6b25lIiwidGVtcGVyYXR1cmUiLCJNYXRoIiwiZmxvb3IiLCJtYWluIiwidGVtcCIsIndlYXRoZXIiLCJpY29uIiwid2VhdGhlckRlc2MiLCJkZXNjcmlwdGlvbiIsImZlZWxzTGlrZSIsImZlZWxzX2xpa2UiLCJodW1pZGl0eSIsIndpbmRTcGVlZCIsIndpbmQiLCJzcGVlZCIsImRhaWx5Rm9yZWNhc3QiLCJpIiwid2Vla0RheSIsImRhaWx5IiwidmFsdWVzIiwidGVtcGVyYXR1cmVNYXgiLCJtYXgiLCJ0ZW1wZXJhdHVyZU1pbiIsIm1pbiIsInB1c2giLCJyZW5kZXJTdGF0aWNFbGVtZW50cyIsImRhdGFUb0Rpc3BsYXkiLCJib2R5RWwiLCJ3ZWF0aGVyRWwiLCJ3ZWF0aGVySWNvbkVsIiwiY2l0eUVsIiwidGltZUVsIiwidGVtcGVyYXR1cmVFbCIsInRlbXBJY29uRWwiLCJmZWVsc0xpa2VJY29uRWwiLCJmZWVsc0xpa2VFbCIsImh1bWlkaXR5SWNvbkVsIiwiaHVtaWRpdHlFbCIsIndpbmRTcGVlZEljb25FbCIsIndpbmRTcGVlZEVsIiwic2NhbGVUb0NoYW5nZUVsIiwic2VhcmNoSW5wdXQiLCJ3ZWVrRGF5TmFtZXMiLCJpbm5lckhUTUwiLCJnZXREYXkiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJzbGljZSIsImdldE1pbnV0ZXMiLCJhZGQiLCJ2YWx1ZSIsInN0eWxlIiwiYmFja2dyb3VuZENvbG9yIiwibGVuZ3RoIiwiZGl2Iiwid2Vla0RheUVsIiwibWF4VGVtcEVsIiwibWluVGVtcEVsIiwiZ2V0V2Vla2RheU5hbWUiLCJhcHBlbmRDaGlsZCIsImN1cnJlbnREYXkiLCJkYXlzRnJvbVRvZGF5IiwiZGF5VG9TZWxlY3QiLCJzZWFyY2hCdXR0b24iLCJjaGFuZ2VTY2FsZUJ1dHRvbiIsImNpdHlOYW1lRWwiLCJhZGRFdmVudExpc3RlbmVyIiwiYWRkRXZlbnRMaXN0ZW5lcnMiXSwic291cmNlUm9vdCI6IiJ9