(()=>{"use strict";async function e(e,t="metric"){try{const{data:n,data2:a}=await async function(e,t){try{const n=document.querySelector(".loader");n.classList.toggle("visible");const a=await fetch(`http://api.openweathermap.org/data/2.5/weather?q=${e}&units=${t}&appid=76d5136cd55d14c88e4d9549d0f550f2`),o=await a.json(),c=await fetch(`https://api.openweathermap.org/data/2.5/onecall?lat=${o.coord.lat}&lon=${o.coord.lon}&units=${t}&exclude=minutely,alerts&appid=76d5136cd55d14c88e4d9549d0f550f2`),r=await c.json();return n.classList.toggle("visible"),{data:o,data2:r}}catch(e){return void console.log("City not found!")}}(e,t);console.log(a,n);const o=n.name,c=n.sys.country;let r=new Date((new Date).toLocaleString("en-US",{timeZone:a.timezone}));console.log(r);const i=Math.floor(n.main.temp),d=n.weather[0].main,l=n.weather[0].icon,s=n.weather[0].description,u=Math.floor(n.main.feels_like),m=n.main.humidity,y=Math.floor(n.wind.speed);let p=[];for(let e=1;e<8;e++){const t=a.daily[e],n={temperatureMax:t.temp.max,temperatureMin:t.temp.min,weather:t.weather[0].main,icon:t.weather[0].icon};p.push(n)}return console.log(p),{cityName:o,countryName:c,time:r,temperature:i,weather:d,icon:l,weatherDesc:s,feelsLike:u,humidity:m,windSpeed:y,scale:t,dailyForecast:p}}catch(e){return void console.log("Not found")}}function t(e){console.log(e);const t=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=document.querySelector(".weather-info"),o=document.querySelector(".weather-icon"),c=document.querySelector(".city-name"),r=document.querySelector(".date"),i=document.querySelector(".temperature-value"),d=document.querySelector(".temperature-icon"),l=document.querySelector(".feels-like-icon"),s=document.querySelector(".feels-like-value"),u=document.querySelector(".humidity-icon"),m=document.querySelector(".humidity-value"),y=document.querySelector(".wind-speed-icon"),p=document.querySelector(".wind-speed-value"),h=document.querySelector(".change-scale-desc");a.textContent=e.weather,o.innerHTML=`<img src="../icons/${e.icon}.png"></img>`,c.textContent=e.cityName+", "+e.countryName,r.textContent=t[e.time.getDay()]+", "+e.time.getDate()+" - "+e.time.getHours()+":"+e.time.getMinutes(),i.textContent=e.temperature,d.textContent="metric"===e.scale?"ºC":"ºF",l.classList.add("fa-solid"),l.classList.add("fa-temperature-high"),s.textContent=e.feelsLike+" "+d.textContent,u.classList.add("fa-solid"),u.classList.add("fa-droplet"),m.textContent=e.humidity+" %",y.classList.add("fa-solid"),y.classList.add("fa-wind"),p.textContent=e.windSpeed+" "+("metric"===e.scale?"meter/sec":"miles/hour"),h.textContent="Change to "+("metric"===e.scale?"imperial":"metric");for(let a=0;a<e.dailyForecast.length;a++){const o=document.querySelector(`.day${a+1}`),c=document.querySelector(`.day${a+1} > .weekday`),r=document.querySelector(`.day${a+1} > .max-temp`),i=document.querySelector(`.day${a+1} > .min-temp`),l=document.querySelector(`.day${a+1} > .weather-day`),s=document.querySelector(`.day${a+1} > .icon`);c.innerHTML=n(e.time.getDay(),a,t),console.log(c.textContent),r.textContent=Math.floor(e.dailyForecast[a].temperatureMax)+" "+d.textContent,i.textContent=Math.floor(e.dailyForecast[a].temperatureMin)+" "+d.textContent,l.textContent=e.dailyForecast[a].weather,s.innerHTML=`<img src="../icons/${e.dailyForecast[a].icon}.png"></img>`,o.appendChild(c),o.appendChild(r),o.appendChild(i),o.appendChild(l),o.appendChild(s)}}const n=(e,t,n)=>{let a=e+t;return a>6&&(a-=7),n[a]},a=document.querySelector(".fa-magnifying-glass"),o=document.querySelector("input#search"),c=document.querySelector(".change-scale"),r=document.querySelector(".temperature-icon"),i=document.querySelector(".city-name");!async function(){a.addEventListener("click",(async()=>{try{console.log(o.value),t(await e(o.value))}catch(e){}})),c.addEventListener("click",(async()=>{if(r&&i){const n="ºC"===r.textContent?"imperial":"metric";t(await e(i.textContent,n))}}))}(),async function(){t(await e("Barcelona"))}()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RGdCeEQsRUFBWSxjQURoQyxJIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvbG9naWMvcHJvY2Vzc0RhdGEuanMiLCJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvbG9naWMvZmV0Y2hXZWF0aGVyQVBJLmpzIiwid2VicGFjazovL2pzLXRvcC13ZWF0aGVyYXBwLy4vc3JjL3ZpZXcvcmVuZGVyU3RhdGljRWxlbWVudHMuanMiLCJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvbG9naWMvYWRkRXZlbnRMaXN0ZW5lcnMuanMiLCJ3ZWJwYWNrOi8vanMtdG9wLXdlYXRoZXJhcHAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgcmVuZGVyU3RhdGljRWxlbWVudHMgfSBmcm9tICcuLi92aWV3L3JlbmRlclN0YXRpY0VsZW1lbnRzJ1xyXG5pbXBvcnQgeyBmZXRjaFdlYXRoZXJBUEkgfSBmcm9tICcuL2ZldGNoV2VhdGhlckFQSSdcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzRGF0YShjaXR5LHNjYWxlID0gJ21ldHJpYycpe1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIGNvbnN0IHtkYXRhLGRhdGEyfSA9IGF3YWl0IGZldGNoV2VhdGhlckFQSShjaXR5LCBzY2FsZSlcclxuICAgICAgICBjb25zb2xlLmxvZyhkYXRhMixkYXRhKVxyXG4gICAgICAgIGNvbnN0IGNpdHlOYW1lID0gZGF0YS5uYW1lXHJcbiAgICAgICAgY29uc3QgY291bnRyeU5hbWUgPSBkYXRhLnN5cy5jb3VudHJ5XHJcbiAgICAgICAgbGV0IHRpbWUgPSBuZXcgRGF0ZShuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCdlbi1VUycsIHt0aW1lWm9uZTogZGF0YTIudGltZXpvbmV9KSlcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2codGltZSlcclxuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IE1hdGguZmxvb3IoZGF0YS5tYWluLnRlbXApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlciA9IGRhdGEud2VhdGhlclswXS5tYWluXHJcbiAgICAgICAgY29uc3QgaWNvbiA9IGRhdGEud2VhdGhlclswXS5pY29uXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckRlc2MgPSBkYXRhLndlYXRoZXJbMF0uZGVzY3JpcHRpb25cclxuICAgICAgICBjb25zdCBmZWVsc0xpa2UgPSBNYXRoLmZsb29yKGRhdGEubWFpbi5mZWVsc19saWtlKVxyXG4gICAgICAgIGNvbnN0IGh1bWlkaXR5ID0gZGF0YS5tYWluLmh1bWlkaXR5XHJcbiAgICAgICAgY29uc3Qgd2luZFNwZWVkID0gTWF0aC5mbG9vcihkYXRhLndpbmQuc3BlZWQpXHJcblxyXG4gICAgICAgIGxldCBkYWlseUZvcmVjYXN0ID0gW11cclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCA4IDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGRhdGEyLmRhaWx5W2ldXHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IHtcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlTWF4IDogZGF5LnRlbXAubWF4LFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmVNaW4gOiBkYXkudGVtcC5taW4sXHJcbiAgICAgICAgICAgICAgICB3ZWF0aGVyIDogZGF5LndlYXRoZXJbMF0ubWFpbixcclxuICAgICAgICAgICAgICAgIGljb24gOiBkYXkud2VhdGhlclswXS5pY29uXHJcbiAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgIGRhaWx5Rm9yZWNhc3QucHVzaCh2YWx1ZXMpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnNvbGUubG9nKGRhaWx5Rm9yZWNhc3QpXHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIHsgXHJcbiAgICAgICAgICAgIGNpdHlOYW1lLFxyXG4gICAgICAgICAgICBjb3VudHJ5TmFtZSxcclxuICAgICAgICAgICAgdGltZSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgIHdlYXRoZXIsXHJcbiAgICAgICAgICAgIGljb24sXHJcbiAgICAgICAgICAgIHdlYXRoZXJEZXNjLFxyXG4gICAgICAgICAgICBmZWVsc0xpa2UsXHJcbiAgICAgICAgICAgIGh1bWlkaXR5LFxyXG4gICAgICAgICAgICB3aW5kU3BlZWQsXHJcbiAgICAgICAgICAgIHNjYWxlLFxyXG4gICAgICAgICAgICBkYWlseUZvcmVjYXN0XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0gY2F0Y2goZXJyKXtcclxuICAgICAgICBjb25zb2xlLmxvZygnTm90IGZvdW5kJylcclxuICAgICAgICByZXR1cm5cclxuICAgIH1cclxufVxyXG5cclxuXHJcbiIsImV4cG9ydCBhc3luYyBmdW5jdGlvbiBmZXRjaFdlYXRoZXJBUEkgKGNpdHksc2NhbGUpe1xyXG4gICAgdHJ5e1xyXG4gICAgICAgIC8vVE9ETyBSZWZhY3RvciB3aXRoIFByb21pc2UuYWxsXHJcbiAgICAgICAgY29uc3QgbG9hZGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubG9hZGVyJylcclxuICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGBodHRwOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9kYXRhLzIuNS93ZWF0aGVyP3E9JHtjaXR5fSZ1bml0cz0ke3NjYWxlfSZhcHBpZD03NmQ1MTM2Y2Q1NWQxNGM4OGU0ZDk1NDlkMGY1NTBmMmApXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlMiA9IGF3YWl0IGZldGNoKGBodHRwczovL2FwaS5vcGVud2VhdGhlcm1hcC5vcmcvZGF0YS8yLjUvb25lY2FsbD9sYXQ9JHtkYXRhLmNvb3JkLmxhdH0mbG9uPSR7ZGF0YS5jb29yZC5sb259JnVuaXRzPSR7c2NhbGV9JmV4Y2x1ZGU9bWludXRlbHksYWxlcnRzJmFwcGlkPTc2ZDUxMzZjZDU1ZDE0Yzg4ZTRkOTU0OWQwZjU1MGYyYClcclxuICAgICAgICBjb25zdCBkYXRhMiA9IGF3YWl0IHJlc3BvbnNlMi5qc29uKClcclxuICAgICAgICBsb2FkZXJFbC5jbGFzc0xpc3QudG9nZ2xlKCd2aXNpYmxlJylcclxuICAgICAgICAvLyBjb25zdCByZXNwb25zZTMgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuc3BvdGlmeS5jb20vdjEvYXJ0aXN0cy8xdkNXSGFDNWYydVMzeWhwd1diSUE2L2FsYnVtcz9hbGJ1bV90eXBlPVNJTkdMRSZvZmZzZXQ9MjAmbGltaXQ9MTAnKVxyXG4gICAgICAgIC8vIGNvbnN0IGRhdGEzID0gYXdhaXQgcmVzcG9uc2UzLmpzb24oKVxyXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEzKVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGRhdGEsXHJcbiAgICAgICAgICAgIGRhdGEyXHJcbiAgICAgICAgfVxyXG4gICAgfWNhdGNoKGVycil7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0NpdHkgbm90IGZvdW5kIScpXHJcbiAgICAgICAgcmV0dXJuXHJcbiAgICB9XHJcbn0iLCIvLyBUYWtlcyBwcm9jZXNzRGF0YSBhcyBhcmd1bWVudFxyXG5leHBvcnQgZnVuY3Rpb24gcmVuZGVyU3RhdGljRWxlbWVudHMoZGF0YVRvRGlzcGxheSl7XHJcbiAgICBjb25zb2xlLmxvZyhkYXRhVG9EaXNwbGF5KVxyXG4gICAgY29uc3Qgd2Vla0RheU5hbWVzID0gWydNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5JywgJ1N1bmRheSddXHJcbiAgICBjb25zdCB3ZWF0aGVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1pbmZvJylcclxuICAgIGNvbnN0IHdlYXRoZXJJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2VhdGhlci1pY29uJylcclxuICAgIGNvbnN0IGNpdHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaXR5LW5hbWUnKVxyXG4gICAgY29uc3QgdGltZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRhdGUnKVxyXG4gICAgY29uc3QgdGVtcGVyYXR1cmVFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50ZW1wZXJhdHVyZS12YWx1ZScpXHJcbiAgICBjb25zdCB0ZW1wSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRlbXBlcmF0dXJlLWljb24nKVxyXG4gICAgY29uc3QgZmVlbHNMaWtlSWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZlZWxzLWxpa2UtaWNvbicpXHJcbiAgICBjb25zdCBmZWVsc0xpa2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mZWVscy1saWtlLXZhbHVlJylcclxuICAgIGNvbnN0IGh1bWlkaXR5SWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmh1bWlkaXR5LWljb24nKVxyXG4gICAgY29uc3QgaHVtaWRpdHlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5odW1pZGl0eS12YWx1ZScpXHJcbiAgICBjb25zdCB3aW5kU3BlZWRJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcud2luZC1zcGVlZC1pY29uJylcclxuICAgIGNvbnN0IHdpbmRTcGVlZEVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndpbmQtc3BlZWQtdmFsdWUnKVxyXG4gICAgY29uc3Qgc2NhbGVUb0NoYW5nZUVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1zY2FsZS1kZXNjJylcclxuXHJcbiAgICB3ZWF0aGVyRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LndlYXRoZXJcclxuICAgIHdlYXRoZXJJY29uRWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiLi4vaWNvbnMvJHtkYXRhVG9EaXNwbGF5Lmljb259LnBuZ1wiPjwvaW1nPmBcclxuICAgIGNpdHlFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuY2l0eU5hbWUgKyAnLCAnICsgZGF0YVRvRGlzcGxheS5jb3VudHJ5TmFtZVxyXG4gICAgdGltZUVsLnRleHRDb250ZW50ID0gd2Vla0RheU5hbWVzW2RhdGFUb0Rpc3BsYXkudGltZS5nZXREYXkoKV0gKyAnLCAnICsgZGF0YVRvRGlzcGxheS50aW1lLmdldERhdGUoKSArICcgLSAnICsgZGF0YVRvRGlzcGxheS50aW1lLmdldEhvdXJzKCkgKyAnOicgKyBkYXRhVG9EaXNwbGF5LnRpbWUuZ2V0TWludXRlcygpXHJcbiAgICB0ZW1wZXJhdHVyZUVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS50ZW1wZXJhdHVyZVxyXG4gICAgdGVtcEljb25FbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnID8gJ8K6QycgOiAnwrpGJ1xyXG5cclxuICAgIGZlZWxzTGlrZUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS1zb2xpZCcpIFxyXG4gICAgZmVlbHNMaWtlSWNvbkVsLmNsYXNzTGlzdC5hZGQoJ2ZhLXRlbXBlcmF0dXJlLWhpZ2gnKSBcclxuICAgIGZlZWxzTGlrZUVsLnRleHRDb250ZW50ID0gZGF0YVRvRGlzcGxheS5mZWVsc0xpa2UgKyAnICcgKyB0ZW1wSWNvbkVsLnRleHRDb250ZW50XHJcbiAgICBodW1pZGl0eUljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS1zb2xpZCcpIFxyXG4gICAgaHVtaWRpdHlJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtZHJvcGxldCcpIFxyXG4gICAgaHVtaWRpdHlFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkuaHVtaWRpdHkgKyAnICUnXHJcbiAgICB3aW5kU3BlZWRJY29uRWwuY2xhc3NMaXN0LmFkZCgnZmEtc29saWQnKSBcclxuICAgIHdpbmRTcGVlZEljb25FbC5jbGFzc0xpc3QuYWRkKCdmYS13aW5kJykgXHJcbiAgICB3aW5kU3BlZWRFbC50ZXh0Q29udGVudCA9IGRhdGFUb0Rpc3BsYXkud2luZFNwZWVkICsgJyAnICsgKGRhdGFUb0Rpc3BsYXkuc2NhbGUgPT09ICdtZXRyaWMnID8gJ21ldGVyL3NlYycgOiAnbWlsZXMvaG91cicpXHJcbiAgICBzY2FsZVRvQ2hhbmdlRWwudGV4dENvbnRlbnQgPSAnQ2hhbmdlIHRvICcgKyAoZGF0YVRvRGlzcGxheS5zY2FsZSA9PT0gJ21ldHJpYycgPyAnaW1wZXJpYWwnIDogJ21ldHJpYycpXHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3QubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX1gKVxyXG4gICAgICAgIC8vVE9ETyBJbXBsZW1lbnQgd2Vla2RheVxyXG4gICAgICAgIGNvbnN0IHdlZWtEYXlFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC53ZWVrZGF5YClcclxuICAgICAgICBjb25zdCBtYXhUZW1wRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuZGF5JHtpICsgMX0gPiAubWF4LXRlbXBgKVxyXG4gICAgICAgIGNvbnN0IG1pblRlbXBFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC5kYXkke2kgKyAxfSA+IC5taW4tdGVtcGApXHJcbiAgICAgICAgY29uc3Qgd2VhdGhlckVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLndlYXRoZXItZGF5YClcclxuICAgICAgICBjb25zdCB3ZWF0aGVySWNvbkVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLmRheSR7aSArIDF9ID4gLmljb25gKVxyXG5cclxuICAgICAgICB3ZWVrRGF5RWwuaW5uZXJIVE1MID0gZ2V0V2Vla2RheU5hbWUoZGF0YVRvRGlzcGxheS50aW1lLmdldERheSgpLCBpLCB3ZWVrRGF5TmFtZXMpXHJcbiAgICAgICAgY29uc29sZS5sb2cod2Vla0RheUVsLnRleHRDb250ZW50KVxyXG4gICAgICAgIG1heFRlbXBFbC50ZXh0Q29udGVudCA9IE1hdGguZmxvb3IoZGF0YVRvRGlzcGxheS5kYWlseUZvcmVjYXN0W2ldLnRlbXBlcmF0dXJlTWF4KSArICcgJyArIHRlbXBJY29uRWwudGV4dENvbnRlbnRcclxuICAgICAgICBtaW5UZW1wRWwudGV4dENvbnRlbnQgPSBNYXRoLmZsb29yKGRhdGFUb0Rpc3BsYXkuZGFpbHlGb3JlY2FzdFtpXS50ZW1wZXJhdHVyZU1pbikgKyAnICcrIHRlbXBJY29uRWwudGV4dENvbnRlbnRcclxuICAgICAgICB3ZWF0aGVyRWwudGV4dENvbnRlbnQgPSBkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0ud2VhdGhlclxyXG4gICAgICAgIHdlYXRoZXJJY29uRWwuaW5uZXJIVE1MID0gYDxpbWcgc3JjPVwiLi4vaWNvbnMvJHtkYXRhVG9EaXNwbGF5LmRhaWx5Rm9yZWNhc3RbaV0uaWNvbn0ucG5nXCI+PC9pbWc+YFxyXG4gICAgICAgXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlZWtEYXlFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQobWF4VGVtcEVsKVxyXG4gICAgICAgIGRpdi5hcHBlbmRDaGlsZChtaW5UZW1wRWwpXHJcbiAgICAgICAgZGl2LmFwcGVuZENoaWxkKHdlYXRoZXJFbClcclxuICAgICAgICBkaXYuYXBwZW5kQ2hpbGQod2VhdGhlckljb25FbCkgXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IGdldFdlZWtkYXlOYW1lID0gKGN1cnJlbnREYXksZGF5c0Zyb21Ub2RheSwgd2Vla0RheU5hbWVzKSA9PntcclxuICAgIC8vIEdldCB0aGUgY3VycmVudCBkYXksIHRvIGtub3cgd2hlcmUgdG8gc3RhcnRcclxuICAgIGxldCBkYXlUb1NlbGVjdCA9IGN1cnJlbnREYXkgKyBkYXlzRnJvbVRvZGF5XHJcbiAgICBpZihkYXlUb1NlbGVjdCA+IDYpe1xyXG4gICAgICAgIGRheVRvU2VsZWN0IC09IDdcclxuICAgIH1cclxuICAgIHJldHVybiB3ZWVrRGF5TmFtZXNbZGF5VG9TZWxlY3RdXHJcbn0iLCJpbXBvcnQgeyBwcm9jZXNzRGF0YSB9IGZyb20gJy4vcHJvY2Vzc0RhdGEnXHJcbmltcG9ydCB7IHJlbmRlclN0YXRpY0VsZW1lbnRzIH0gZnJvbSAnLi4vdmlldy9yZW5kZXJTdGF0aWNFbGVtZW50cydcclxuXHJcblxyXG5jb25zdCBzZWFyY2hCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZmEtbWFnbmlmeWluZy1nbGFzcycpXHJcbi8vIEZpeGVkIHRvIGEgY2l0eSBmb3IgdGVzdGluZ1xyXG5jb25zdCBzZWFyY2hJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0I3NlYXJjaCcpXHJcbmNvbnN0IGNoYW5nZVNjYWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNoYW5nZS1zY2FsZScpXHJcbmNvbnN0IHRlbXBJY29uRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGVtcGVyYXR1cmUtaWNvbicpXHJcbmNvbnN0IGNpdHlOYW1lRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2l0eS1uYW1lJylcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVycygpe1xyXG4gICAgc2VhcmNoQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgdHJ5e1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWFyY2hJbnB1dC52YWx1ZSlcclxuICAgICAgICAgICAgY29uc3QgZGF0YVRvRGlzcGxheSA9ICBhd2FpdCBwcm9jZXNzRGF0YShzZWFyY2hJbnB1dC52YWx1ZSlcclxuICAgICAgICAgICAgcmVuZGVyU3RhdGljRWxlbWVudHMoZGF0YVRvRGlzcGxheSlcclxuICAgICAgICB9Y2F0Y2goZXJyKXtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIGNoYW5nZVNjYWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT57XHJcbiAgICAgICAgaWYodGVtcEljb25FbCAmJiBjaXR5TmFtZUVsKXtcclxuICAgICAgICAgICAgY29uc3Qgc2NhbGUgPSB0ZW1wSWNvbkVsLnRleHRDb250ZW50ID09PSAnwrpDJyA/ICdpbXBlcmlhbCcgOiAnbWV0cmljJ1xyXG4gICAgICAgICAgICBjb25zdCBkYXRhVG9EaXNwbGF5ID0gYXdhaXQgcHJvY2Vzc0RhdGEoY2l0eU5hbWVFbC50ZXh0Q29udGVudCwgc2NhbGUpXHJcbiAgICAgICAgICAgIHJlbmRlclN0YXRpY0VsZW1lbnRzKGRhdGFUb0Rpc3BsYXkpXHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0iLCJpbXBvcnQge3Byb2Nlc3NEYXRhfSBmcm9tICcuL2xvZ2ljL3Byb2Nlc3NEYXRhJ1xyXG5pbXBvcnQge3JlbmRlclN0YXRpY0VsZW1lbnRzfSBmcm9tICcuL3ZpZXcvcmVuZGVyU3RhdGljRWxlbWVudHMnXHJcbmltcG9ydCB7IGFkZEV2ZW50TGlzdGVuZXJzIH0gZnJvbSAnLi9sb2dpYy9hZGRFdmVudExpc3RlbmVycydcclxuXHJcbmFkZEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4oYXN5bmMgZnVuY3Rpb24oKXtcclxuICAgIGNvbnN0IGEgPSBhd2FpdCBwcm9jZXNzRGF0YSgnQmFyY2Vsb25hJylcclxuICAgIHJlbmRlclN0YXRpY0VsZW1lbnRzKGEpXHJcbn0pKCkiXSwibmFtZXMiOlsiYXN5bmMiLCJwcm9jZXNzRGF0YSIsImNpdHkiLCJzY2FsZSIsImRhdGEiLCJkYXRhMiIsImxvYWRlckVsIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwicmVzcG9uc2UiLCJmZXRjaCIsImpzb24iLCJyZXNwb25zZTIiLCJjb29yZCIsImxhdCIsImxvbiIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJmZXRjaFdlYXRoZXJBUEkiLCJjaXR5TmFtZSIsIm5hbWUiLCJjb3VudHJ5TmFtZSIsInN5cyIsImNvdW50cnkiLCJ0aW1lIiwiRGF0ZSIsInRvTG9jYWxlU3RyaW5nIiwidGltZVpvbmUiLCJ0aW1lem9uZSIsInRlbXBlcmF0dXJlIiwiTWF0aCIsImZsb29yIiwibWFpbiIsInRlbXAiLCJ3ZWF0aGVyIiwiaWNvbiIsIndlYXRoZXJEZXNjIiwiZGVzY3JpcHRpb24iLCJmZWVsc0xpa2UiLCJmZWVsc19saWtlIiwiaHVtaWRpdHkiLCJ3aW5kU3BlZWQiLCJ3aW5kIiwic3BlZWQiLCJkYWlseUZvcmVjYXN0IiwiaSIsImRheSIsImRhaWx5IiwidmFsdWVzIiwidGVtcGVyYXR1cmVNYXgiLCJtYXgiLCJ0ZW1wZXJhdHVyZU1pbiIsIm1pbiIsInB1c2giLCJyZW5kZXJTdGF0aWNFbGVtZW50cyIsImRhdGFUb0Rpc3BsYXkiLCJ3ZWVrRGF5TmFtZXMiLCJ3ZWF0aGVyRWwiLCJ3ZWF0aGVySWNvbkVsIiwiY2l0eUVsIiwidGltZUVsIiwidGVtcGVyYXR1cmVFbCIsInRlbXBJY29uRWwiLCJmZWVsc0xpa2VJY29uRWwiLCJmZWVsc0xpa2VFbCIsImh1bWlkaXR5SWNvbkVsIiwiaHVtaWRpdHlFbCIsIndpbmRTcGVlZEljb25FbCIsIndpbmRTcGVlZEVsIiwic2NhbGVUb0NoYW5nZUVsIiwidGV4dENvbnRlbnQiLCJpbm5lckhUTUwiLCJnZXREYXkiLCJnZXREYXRlIiwiZ2V0SG91cnMiLCJnZXRNaW51dGVzIiwiYWRkIiwibGVuZ3RoIiwiZGl2Iiwid2Vla0RheUVsIiwibWF4VGVtcEVsIiwibWluVGVtcEVsIiwiZ2V0V2Vla2RheU5hbWUiLCJhcHBlbmRDaGlsZCIsImN1cnJlbnREYXkiLCJkYXlzRnJvbVRvZGF5IiwiZGF5VG9TZWxlY3QiLCJzZWFyY2hCdXR0b24iLCJzZWFyY2hJbnB1dCIsImNoYW5nZVNjYWxlQnV0dG9uIiwiY2l0eU5hbWVFbCIsImFkZEV2ZW50TGlzdGVuZXIiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXJzIl0sInNvdXJjZVJvb3QiOiIifQ==